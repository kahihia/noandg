webpackJsonp([1],{"/qeF":function(t,e){},"2clI":function(t,e){},"3jIM":function(t,e){},"7WuQ":function(t,e){},"80du":function(t,e){},KU5d:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mtWM"),s=a.n(i),r=a("7+uW"),o=a("NYxO"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("notifications",{attrs:{group:"error"}}),t._v(" "),a("notifications",{attrs:{group:"success"}}),t._v(" "),this.$store.state.loggedIn?a("div",{attrs:{id:"app-body"}},[a("div",{attrs:{id:"content"}},[a("div",{staticClass:"left-nav"},[a("div",{staticClass:"nav"},[a("router-link",{staticClass:"logo",attrs:{to:{name:"home"}}})],1),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"sidebar-links"},[a("div",{staticClass:"sidebar-links-pane"},[a("div",{staticClass:"sidebar-link-pane"},[a("router-link",{staticClass:"sidebar-link",attrs:{to:"/timeline",activeClass:"active"}},[a("span",{staticClass:"sidebar-link-icon icon-time"}),t._v(" "),a("div",{staticClass:"sidebar-link-text"},[a("span",[t._v("Timeline")])])])],1),t._v(" "),a("div",{staticClass:"sidebar-link-pane"},[a("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"home"},activeClass:"active"}},[a("span",{staticClass:"sidebar-link-icon icon-dashboard"}),t._v(" "),a("div",{staticClass:"sidebar-link-text"},[a("span",[t._v("Dashboard")])])])],1),t._v(" "),a("div",{staticClass:"sidebar-link-pane"},[this.checkPermissions.validatePermission(this.allPermissions.view_project,this.$store.getters.getPermissions)?a("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"projects_directory"},activeClass:"active"}},[a("span",{staticClass:"sidebar-link-icon icon-projects"}),t._v(" "),a("div",{staticClass:"sidebar-link-text"},[a("span",[t._v("Projects")])])]):t._e()],1),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"sidebar-link-pane"},[this.checkPermissions.validatePermission(this.allPermissions.view_user,this.$store.getters.getPermissions)?a("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"users_directory"},activeClass:"active"}},[a("span",{staticClass:"sidebar-link-icon icon-users"}),t._v(" "),a("div",{staticClass:"sidebar-link-text"},[a("span",[t._v("Users")])])]):t._e()],1),t._v(" "),a("div",{staticClass:"sidebar-link-pane"},[this.checkPermissions.validatePermission(this.allPermissions.view_group,this.$store.getters.getPermissions)?a("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"groups_directory"},activeClass:"active"}},[a("span",{staticClass:"sidebar-link-icon icon-permissions"}),t._v(" "),a("div",{staticClass:"sidebar-link-text"},[a("span",[t._v("User Groups")])])]):t._e()],1)])]),t._v(" "),t._m(2)]),t._v(" "),a("div",{staticClass:"right-pane"},[a("router-view")],1)])]):a("div",[a("router-view")],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav-notifs"},[e("button",{staticClass:"nav-notifs-icon"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sidebar-header"},[e("span",[this._v("Manage")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav-accounts"},[e("button",[e("div",{staticClass:"names"},[e("span",{staticClass:"names-name"},[this._v("Muisume")]),this._v(" "),e("span",{staticClass:"names-role"},[this._v("Muisume's workspace")])]),this._v(" "),e("div",{staticClass:"names-icon"},[e("div",{staticClass:"names-icon-text"},[this._v("Mu")])])])])}]};var u=a("VU/8")({beforeCreate:function(){this.$store.getters.getLoggedIn||this.$router.push({name:"accounts_login"})},methods:{hideMainSidebar:function(){return!("project_overview"===this.$route.name||"project_files"===this.$route.name||"project_budget"===this.$route.name||"project_bidding"===this.$route.name||"project_quotation"===this.$route.name||"project_fabrication"===this.$route.name)}}},n,!1,function(t){a("mE6k")},null,null).exports,l=a("18Sv"),c=a.n(l),d=a("CLX7"),p=a.n(d),m=a("BTaQ"),v=a.n(m),_=a("gffa"),g=a("/ocq"),h={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("Dashboard")])},staticRenderFns:[]};var f=a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Noandgerp App"}}},h,!1,function(t){a("VgYV")},"data-v-2c7fbc6c",null).exports,w={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("Sorry! Page not found")])},staticRenderFns:[]};var E=a("VU/8")({},w,!1,function(t){a("KU5d")},"data-v-57ce8a6e",null).exports,D=a("//Fk"),q=a.n(D),b={LIMIT:1e4,PAGE_LIMIT:10,DEFAULT_PAGE_1:1,NOTIF_TIMEOUT:5e3,NOTIF_NEVER_TIMEOUT:-1,ONE_DAY:1,SEVEN_DAYS:7,THIRTY_DAYS:30,LOGIN_URL:"/api/v1/accounts/login/",USER_LIST_URL:"/api/v1/users/list/",FORM_USER_GROUPS_URL:"/api/v1/users/forms/groups/",CREATE_USER_URL:"/api/v1/users/create/employee/",USER_GROUPS_URL:"/api/v1/users/groups/",CREATE_USER_GROUPS_URL:"/api/v1/users/create/group/",USER_PERMISSIONS_URL:"/api/v1/users/permissions/",USER_PLANS_URL:"/api/v1/users/plans/",USER_PROFILE_URL:"/api/v1/users/profiles/",PROJECTS_DIRECTORY:"/api/v1/engineering/projects/",CREATE_PROJECT:"/api/v1/engineering/create/project/",PROJECT_LEADS:"/api/v1/engineering/forms/leads/",FILES_DIRECTORY:"/api/v1/engineering/files/",CREATE_FILE:"/api/v1/engineering/create/file/",EQUIPMENT_DIRECTORY:"/api/v1/engineering/equipments/",CREATE_EQUIPMENT:"/api/v1/engineering/create/equipment/",BUDGET_DIRECTORY:"/api/v1/engineering/budgets/",CREATE_BUDGET:"/api/v1/engineering/create/budget/",BID_DIRECTORY:"/api/v1/engineering/bids/",CREATE_BID:"/api/v1/engineering/create/bid/",QUOTE_DIRECTORY:"/api/v1/engineering/quotes/",CREATE_QUOTE:"/api/v1/engineering/create/quote/",PROJECT_EQUIPMENTS:"/api/v1/engineering/forms/equipments/",QUOTE_ITEM_DIRECTORY:"/api/v1/engineering/quoteitems/",CREATE_QUOTE_ITEM:"/api/v1/engineering/create/quoteitem/"},C={login:function(t,e){return y(b.LOGIN_URL,t,{data:e})},usersDirectory:function(t,e,a){return null!==e?y(b.USER_LIST_URL,t,{params:e}):null!==a?y(b.CREATE_USER_URL,t,{data:a}):y(b.USER_LIST_URL,t)},userGroups:function(t,e,a){if(null!==e)return y(b.USER_GROUPS_URL,t,{params:e})},userGroupsForm:function(){return y(b.FORM_USER_GROUPS_URL,"get")},createGroup:function(t,e,a){if(null!==a)return y(b.CREATE_USER_GROUPS_URL,t,{data:a})},viewGroup:function(t,e,a,i){return null!==i?y(b.CREATE_USER_GROUPS_URL+t+"/",e,{data:i}):y(b.CREATE_USER_GROUPS_URL+t+"/",e)},groupPermissions:function(t){return y(b.USER_PERMISSIONS_URL,t)},projectsDirectory:function(t,e,a){return null!==e?y(b.PROJECTS_DIRECTORY,t,{params:e}):null!==a?y(b.CREATE_PROJECT,t,{data:a}):y(b.PROJECTS_DIRECTORY,t)},projectView:function(t,e,a,i){return null!==a?y(b.PROJECTS_DIRECTORY+t+"/",e,{params:a}):null!==i?y(b.CREATE_PROJECT+t+"/",e,{data:i}):y(b.PROJECTS_DIRECTORY+t+"/",e)},projectLeads:function(){return y(b.PROJECT_LEADS,"get")},viewProject:function(t,e,a,i){return null!==a?y(b.PROJECTS_DIRECTORY+t+"/",e,{params:a}):null!==i?y(b.CREATE_PROJECT,e,{data:i}):y(b.PROJECTS_DIRECTORY+t+"/",e)},viewFiles:function(t,e,a,i){return null!==e?y(b.FILES_DIRECTORY,t,{params:e}):null!==a?y(b.CREATE_FILE,t,{data:a},i):y(b.FILES_DIRECTORY,t)},viewEquipments:function(t,e,a){return null!==e?y(b.EQUIPMENT_DIRECTORY,t,{params:e}):null!==a?y(b.CREATE_EQUIPMENT,t,{data:a}):y(b.EQUIPMENT_DIRECTORY,t)},viewEquipment:function(t,e,a,i){return null!==a?y(b.EQUIPMENT_DIRECTORY+t+"/",e,{params:a}):null!==i?y(b.CREATE_EQUIPMENT+t+"/",e,{data:i}):y(b.CREATE_EQUIPMENT+t+"/",e)},viewBudgets:function(t,e,a){return null!==e?y(b.BUDGET_DIRECTORY,t,{params:e}):null!==a?y(b.CREATE_BUDGET,t,{data:a}):y(b.BUDGET_DIRECTORY,t)},viewBudget:function(t,e,a,i){return null!==a?y(b.BUDGET_DIRECTORY+t+"/",e,{params:a}):null!==i?y(b.CREATE_BUDGET+t+"/",e,{data:i}):y(b.CREATE_BUDGET+t+"/",e)},viewBids:function(t,e,a){return null!==e?y(b.BID_DIRECTORY,t,{params:e}):null!==a?y(b.CREATE_BID,t,{data:a}):y(b.BID_DIRECTORY,t)},viewBid:function(t,e,a,i){return null!==a?y(b.BID_DIRECTORY+t+"/",e,{params:a}):null!==i?y(b.CREATE_BID+t+"/",e,{data:i}):y(b.BID_DIRECTORY+t+"/",e)},viewBidExists:function(t,e,a){return null!==e?y(b.BID_DIRECTORY,t,{params:e}):null!==a?y(b.CREATE_BID,t,{data:a}):y(b.BID_DIRECTORY,t)},viewQuotes:function(t,e,a){return null!==e?y(b.QUOTE_DIRECTORY,t,{params:e}):null!==a?y(b.CREATE_QUOTE,t,{data:a}):y(b.QUOTE_DIRECTORY,t)},projectEquipments:function(t){return y(b.PROJECT_EQUIPMENTS,"get",{params:t})},viewQuoteItems:function(t,e,a){return null!==e?y(b.QUOTE_ITEM_DIRECTORY,t,{params:e}):null!==a?y(b.CREATE_QUOTE_ITEM,t,{data:a}):y(b.QUOTE_ITEM_DIRECTORY,t)},viewQuoteItem:function(t,e,a,i){return null!==a?y(b.QUOTE_ITEM_DIRECTORY+t+"/",e,{params:a}):null!==i?y(b.CREATE_QUOTE_ITEM+t+"/",e,{data:i}):y(b.QUOTE_ITEM_DIRECTORY+t+"/",e)}};function y(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0!==a)var o=a.params,n=void 0===o?{}:o,u=a.data,l=void 0===u?{}:u;else n=l={};if(!0===i){var c={headers:{Authorization:s.a.defaults.headers.Authorization,"Content-Type":"multipart/form-data"}};r.default.prototype.$http=s.a,s.a.defaults.headers=c.headers}return new q.a(function(a,i){s()({url:t,method:e,params:n,data:l}).then(function(t){a(t)},function(t){i(t)})})}var P={name:"Login",data:function(){return{user:{username:"",password:""},submitting:!1}},methods:{login:function(){var t=this;this.submitting=!0,C.login("post",this.user).then(function(e){var a=e.data.data;t.$store.commit("setJwt",a.token),t.$store.commit("setUserId",a.user_id),t.$store.commit("setPermissions",a.permissions),t.$store.commit("setLoggedIn");var i=t.$store.getters.getJwt;if(i){var o={headers:{Authorization:"Token "+i}};r.default.prototype.$http=s.a,s.a.defaults.xsrfHeaderName="X-CSRFToken",s.a.defaults.xsrfCookieName="csrftoken",s.a.defaults.headers=o.headers}t.$session.start(),t.$session.set("jwt",a.token),t.$session.set("user_id",a.id),t.$session.set("username",a.username),t.$session.set("full_name",a.full_name),t.$session.set("user_group",a.user_group),t.$session.set("permissions",a.permissions),t.$router.push({name:"home"})}).catch(function(e){console.log(e.response),t.$notify({group:"error",type:"warn",text:e.response.data.non_field_errors[0]})}),this.submitting=!1}},beforeCreate:function(){this.$store.getters.getLoggedIn&&this.$router.push({name:"home"})}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"text-center"},[a("i-col",{attrs:{span:"8",offset:"8"}},[a("h1",{staticClass:"hero-headline"},[t._v("Sign in")]),t._v(" "),a("form",{staticClass:"card",attrs:{action:"",method:"post"},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("div",{staticClass:"formInputContainer"},[a("label",{attrs:{for:"username"}},[t._v("Your Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"input",attrs:{required:t.user.username,type:"text",value:"",name:"username",placeholder:"Email Address",id:"username"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"formInputContainer"},[a("label",{attrs:{for:"user_password"}},[t._v("Your Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"input",attrs:{autocomplete:"",required:t.user.password,type:"password",name:"password",placeholder:"Password",id:"user_password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),t._v(" "),a("div",[a("button",{staticClass:"btn-blue",attrs:{type:"submit"}},[t._v("Sign in")])])])])],1)},staticRenderFns:[]};var j=a("VU/8")(P,x,!1,function(t){a("/qeF")},null,null).exports,$={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var F=a("VU/8")({beforeCreate:function(){this.$session.exists()||this.$router.push({name:"accounts_login"})},methods:{logout:function(){this.$store.commit("setJwt",""),this.$store.commit("setUserId",""),this.$store.commit("setLoggedOut"),this.$router.push({name:"accounts_login"})}},created:function(){this.logout()}},$,!1,function(t){a("rebI")},"data-v-11c96b0e",null).exports,k={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var R=a("VU/8")({},k,!1,function(t){a("XWb+")},"data-v-4237fe05",null).exports,I={mounted:function(){this.$store.getters.getLoggedIn||this.$router.push({name:"accounts_login"}),this.checkPermissions.validatePermission(this.allPermissions.view_user,this.$store.getters.getPermissions)||(this.$notify({group:"error",type:"warning",text:"You do not have permissions to view this page."}),this.$router.push({name:"home"}))},data:function(){return{newUserModal:!1,columns:[{title:"Name",align:"left",sortable:!0,width:250,render:function(t,e){return t("span",e.row.first_name+" "+e.row.last_name)}},{title:"Email Address",align:"left",render:function(t,e){return t("span",e.row.email)}},{title:"Group",align:"left",render:function(t,e){return t("span",e.row.groups[0].name)}}],users:[],pageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},search:{q:""},userGroups:[],formErrors:[],formData:{first_name:"",last_name:"",email:"",groups:[],username:"",password:""}}},methods:{fetchUsers:function(t){var e=this;this.pageData.loading=!0;var a={limit:this.constants.PAGE_LIMIT,offset:t,q:this.search.q};this.api.usersDirectory("get",a,null).then(function(t){var a=t.data;e.pageData.totalRecords=a.count,e.pageData.totalPages=a.total_pages,e.pageData.currentPage=a.current_page,e.users=a.results,e.pageData.loading=!1}).catch(function(t){e.$notify({group:"error",type:"warn",text:t.response.data.detail}),e.pageData.loading=!1})},paginateAction:function(t){this.fetchUsers(t)},saveUser:function(){var t=this;this.formData.username=this.formData.email,this.formData.password=this.formData.email,this.formData.groups=[this.formData.groups],this.api.usersDirectory("post",null,this.formData).then(function(e){t.$notify({group:"success",type:"success",text:"User successfully created"}),t.formErrors=[],t.fetchUsers()}).catch(function(e){console.log(e.response),t.formErrors=e.response.data,t.formErrors.detail?t.$notify({group:"error",type:"warning",text:t.formErrors.detail}):setTimeout(function(){t.newUserModal=!0},0)})},fetchGroups:function(){var t=this;this.api.userGroupsForm().then(function(e){t.userGroups=e.data.results}).catch(function(t){console.log(t.response.data.detail)})}},created:function(){this.fetchUsers(null,!0),this.fetchGroups()}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-header"},[t._m(0),t._v(" "),a("div",{staticClass:"left-links"},[a("div",{staticClass:"buttons"},[a("div",{staticClass:"button-group"},[a("div",{staticClass:"button-group"},[a("button",{staticClass:"btn green",on:{click:function(e){t.newUserModal=!0}}},[t._v("Create user")]),t._v(" "),a("Modal",{attrs:{"ok-text":"Create user",width:"400",title:"Create user"},on:{"on-ok":t.saveUser},model:{value:t.newUserModal,callback:function(e){t.newUserModal=e},expression:"newUserModal"}},[a("p",[t._v("When you create the user, you'll be able to add them to different system groups.")]),t._v(" "),a("form",[a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w50 float-left"},[a("label",{attrs:{for:"first_name"}},[t._v("First name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.first_name,expression:"formData.first_name"}],staticClass:"input",class:t.formErrors.first_name?"invalid-input":"",attrs:{required:t.formData.first_name,type:"text",value:"",name:"first_name",placeholder:"",id:"first_name"},domProps:{value:t.formData.first_name},on:{input:function(e){e.target.composing||t.$set(t.formData,"first_name",e.target.value)}}}),t._v(" "),t.formErrors.first_name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.first_name[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w50 float-right"},[a("label",{attrs:{for:"last_name"}},[t._v("Last name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.last_name,expression:"formData.last_name"}],staticClass:"input",class:t.formErrors.last_name?"invalid-input":"",attrs:{required:t.formData.last_name,type:"text",value:"",name:"last_name",placeholder:"",id:"last_name"},domProps:{value:t.formData.last_name},on:{input:function(e){e.target.composing||t.$set(t.formData,"last_name",e.target.value)}}}),t._v(" "),t.formErrors.last_name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.last_name[0]))]):t._e()])]),t._v(" "),a("div",[a("label",{attrs:{for:"email"}},[t._v("Email address")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"input",class:t.formErrors.email?"invalid-input":"",attrs:{required:t.formData.email,type:"email",value:"",name:"email",placeholder:"",id:"email"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),t.formErrors.email?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.email[0]))]):t._e(),t._v(" "),t.formErrors.username?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.username[0]))]):t._e()]),t._v(" "),a("div",[a("label",{attrs:{for:"groups"}},[t._v("Group")]),t._v(" "),a("Select",{class:t.formErrors.groups&&""===t.formData.groups?"invalid-input":"",attrs:{id:"groups"},model:{value:t.formData.groups,callback:function(e){t.$set(t.formData,"groups",e)},expression:"formData.groups"}},t._l(t.userGroups,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1),t._v(" "),t.formErrors.groups?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.groups[0]))]):t._e()],1)])])],1)])])])]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"content-data"},[a("Table",{attrs:{columns:t.columns,data:t.users,loading:t.pageData.loading}}),t._v(" "),!t.pageData.loading&&t.pageData.totalPages>1?a("Page",{attrs:{total:t.pageData.totalRecords,current:t.pageData.currentPage},on:{"on-change":t.paginateAction}}):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("span",{staticClass:"text"},[this._v("Users")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-info"},[e("span",[this._v("\n      Manage users account status and roles by adding users to handle different tasks.\n      Create your team and start creating great things together.\n    ")])])}]};var B=a("VU/8")(I,M,!1,function(t){a("uUN7")},"data-v-49188194",null).exports,T={mounted:function(){this.$store.getters.getLoggedIn||this.$router.push({name:"accounts_login"}),this.checkPermissions.validatePermission(this.allPermissions.view_group,this.$store.getters.getPermissions)||(this.$notify({group:"error",type:"warning",text:"You do not have permissions to view this page."}),this.$router.push({name:"home"}))},data:function(){return{newGroupModal:!1,columns:[{title:"Name",align:"left",render:function(t,e){return t("span",e.row.name)}}],groups:[],pageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},search:{q:""},formErrors:[],formData:{name:"",permissions:[]}}},methods:{saveGroup:function(){var t=this;this.api.createGroup("post",null,this.formData).then(function(e){t.$notify({group:"success",type:"success",text:"Group successfully created"}),t.formData.name="",t.formErrors=[],t.fetchGroups()}).catch(function(e){t.formErrors=e.response.data,t.formErrors.detail?(t.$notify({group:"error",type:"error",text:t.formErrors.detail}),t.newGroupModal=!1):setTimeout(function(){t.newGroupModal=!0},0)})},fetchGroups:function(t){var e=this;this.pageData.loading=!0;var a={limit:this.constants.PAGE_LIMIT,page:t,q:this.search.q};this.api.userGroups("get",a,null).then(function(t){var a=t.data;e.pageData.totalRecords=a.count,e.pageData.totalPages=a.total_pages,e.pageData.currentPage=a.current_page,e.groups=a.results,e.pageData.loading=!1}).catch(function(t){e.$notify({group:"error",type:"warn",text:t.response.data.detail}),e.pageData.loading=!1})},paginateAction:function(t){this.fetchGroups(t)},viewGroup:function(t){this.$router.push({name:"group_view",params:{slug:t.id}})}},created:function(){this.fetchGroups()}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page-header"},[t._m(0),t._v(" "),a("div",{staticClass:"page-header-right"},[a("div",{staticClass:"buttons"},[a("div",{staticClass:"button-group"},[a("button",{staticClass:"btn-blue",on:{click:function(e){t.newGroupModal=!0}}},[t._v("Create group")]),t._v(" "),a("Modal",{attrs:{"ok-text":"Create group",closable:!1,"mask-closable":!1,width:"400",title:"Create group"},on:{"on-ok":t.saveGroup},model:{value:t.newGroupModal,callback:function(e){t.newGroupModal=e},expression:"newGroupModal"}},[a("p",[t._v("When you create the group, you'll be able to add users to it and configure its access.")]),t._v(" "),a("form",[a("div",[a("label",{attrs:{for:"name"}},[t._v("Group's name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"input",class:t.formErrors.name?"invalid-input":"",attrs:{required:t.formData.name,type:"text",value:"",name:"name",placeholder:"",id:"name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),t.formErrors.name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.name[0]))]):t._e()])])])],1)])])]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"content-data"},[a("div",{staticClass:"items-search"},[a("div",{staticClass:"items-search-padding"},[a("div",{staticClass:"items-search-w"},[a("div",{staticClass:"items-search-padding-pane"},[a("div",{staticClass:"items-search-padding-pane-inner"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.q,expression:"search.q"}],staticClass:"input",attrs:{size:"60"},domProps:{value:t.search.q},on:{keyup:function(e){return e.preventDefault(),t.fetchGroups()},input:function(e){e.target.composing||t.$set(t.search,"q",e.target.value)}}}),t._v(" "),a("span",{staticClass:"items-search-icon"},[a("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",focusable:"false",role:"presentation"}},[a("path",{attrs:{d:"M16.436 15.085l3.94 4.01a1 1 0 0 1-1.425 1.402l-3.938-4.006a7.5 7.5 0 1 1 1.423-1.406zM10.5 16a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11z",fill:"currentColor","fill-rule":"evenodd"}})])])])])])])]),t._v(" "),a("Table",{attrs:{columns:t.columns,data:t.groups,loading:t.pageData.loading},on:{"on-row-click":t.viewGroup}}),t._v(" "),!t.pageData.loading&&t.pageData.totalPages>1?a("Page",{attrs:{total:t.pageData.totalRecords,current:t.pageData.currentPage},on:{"on-change":t.paginateAction}}):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-header-left"},[e("h1",[e("div",{staticClass:"text"},[this._v("Groups")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-info"},[e("span",[this._v("\n      Manage product access and roles in bulk by adding users to groups that have the required permissions.\n      For example, add users to the 'administrators' group so they are able to manage other users.\n    ")])])}]};var A=a("VU/8")(T,U,!1,function(t){a("sdFY")},"data-v-2fb8031c",null).exports,Q={data:function(){return{editGroupModal:!1,deleteGroupModal:!1,permissionGroupModal:!1,userColumns:[{title:"Name",align:"left",width:250,render:function(t,e){return t("span",e.row.first_name+" "+e.row.last_name)}},{title:"Email Address",align:"left",render:function(t,e){return t("span",e.row.email)}}],users:[],userGroup:[],pageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},search:{fq:"",f:""},formErrors:[],formData:{name:"",permissions:[]},permissions:[],permissionsCheck:[],slug:this.$route.params.slug}},methods:{fetchUsers:function(t){var e=this;this.pageData.loading=!0;var a={limit:this.constants.PAGE_LIMIT,offset:t,fq:this.search.fq,f:this.userGroup.name};this.api.usersDirectory("get",a,null).then(function(t){var a=t.data;e.pageData.totalRecords=a.count,e.pageData.totalPages=a.total_pages,e.pageData.currentPage=a.current_page,e.users=a.results,e.pageData.loading=!1}).catch(function(t){e.$notify({group:"error",type:"warn",text:t.response.data.detail}),e.pageData.loading=!1})},paginateUsersAction:function(t){this.fetchUsers(t)},saveGroup:function(){var t=this;this.formData.permissions=this.permissionsCheck,this.api.viewGroup(this.slug,"put",null,this.formData).then(function(e){t.$notify({group:"success",type:"success",text:"Changes successfully saved"}),t.formErrors=[]}).catch(function(e){t.formErrors=e.response.data,t.formErrors.detail?(t.$notify({group:"error",type:"error",text:t.formErrors.detail}),t.editGroupModal=!1):setTimeout(function(){t.editGroupModal=!0},0)})},deleteGroup:function(){var t=this;this.api.viewGroup(this.slug,"delete",null,null).then(function(e){t.$notify({group:"success",type:"success",text:"Group successfully deleted"}),t.$router.push({name:"groups_directory"})}).catch(function(e){t.formErrors=e.response.data,t.formErrors.detail?(t.$notify({group:"error",type:"error",text:t.formErrors.detail}),t.deleteGroupModal=!1):setTimeout(function(){t.deleteGroupModal=!0},0)})},fetchGroup:function(){var t=this;this.pageData.loading=!0,this.api.viewGroup(this.slug,"get",null,null).then(function(e){t.userGroup=e.data,t.formData=e.data,t.pageData.loading=!1,t.setCurrentPermissions(t.userGroup.permissions),t.fetchUsers(null,!0),t.fetchPermissions()}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail}),t.pageData.loading=!1})},paginateAction:function(t){this.fetchGroup(t)},inputLabel:function(t,e){return t+""+e},fetchPermissions:function(){var t=this;this.api.groupPermissions("get").then(function(e){t.permissions=e.data.results}).catch(function(e){t.$notify({group:"error",type:"info",text:e.response.data.detail})})},setCurrentPermissions:function(t){for(var e=0;e<this.userGroup.permissions.length;e++){var a=this.userGroup.permissions[e];this.permissionsCheck.push(a)}}},created:function(){this.fetchGroup()},mounted:function(){this.$store.getters.getLoggedIn||this.$router.push({name:"accounts_login"}),this.checkPermissions.validatePermission(this.allPermissions.view_group,this.$store.getters.getPermissions)||(this.$notify({group:"error",type:"warning",text:"You do not have permissions to view this page."}),this.$router.push({name:"home"}))}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"breadcrumbs"},[a("router-link",{staticClass:"breadcrumb",attrs:{to:{name:"groups_directory"}}},[a("span",{staticClass:"breadcrumb-back"},[a("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",focusable:"false",role:"presentation"}},[a("path",{attrs:{d:"M8.414 11.5H18a1 1 0 0 1 0 2H8.414l3.793 3.793a1 1 0 0 1-1.414 1.414l-5.5-5.5a1 1 0 0 1 0-1.414l5.5-5.5a1 1 0 0 1 1.414 1.414L8.414 11.5z",fill:"currentColor","fill-rule":"evenodd"}})])]),t._v(" "),a("span",{staticClass:"breadcrumb-text"},[t._v("Groups")])])],1),t._v(" "),a("div",{staticClass:"page-header"},[a("div",{staticClass:"page-header-left"},[a("h1",[a("div",{staticClass:"text"},[t._v(t._s(t.userGroup.name))])])]),t._v(" "),a("div",{staticClass:"page-header-right"},[a("div",{staticClass:"buttons"},[a("div",{staticClass:"button-group"},[a("button",{staticClass:"btn-blue",on:{click:function(e){t.editGroupModal=!0}}},[t._v("Edit name")]),t._v(" "),a("Modal",{attrs:{"ok-text":"Save changes",width:"400",title:"Edit group's name"},on:{"on-ok":t.saveGroup},model:{value:t.editGroupModal,callback:function(e){t.editGroupModal=e},expression:"editGroupModal"}},[a("p",[t._v("Edit the group's name to organize your groups better on the list.")]),t._v(" "),a("form",[a("div",[a("label",{attrs:{for:"name"}},[t._v("Group's name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"input",class:t.formErrors.name?"invalid-input":"",attrs:{required:t.formData.name,type:"text",value:"",name:"name",placeholder:"",id:"name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),t.formErrors.name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.name[0]))]):t._e()])])])],1),t._v(" "),a("div",{staticClass:"button-group"},[a("button",{staticClass:"btn-gray",on:{click:function(e){t.permissionGroupModal=!0}}},[t._v("Permissions")]),t._v(" "),a("Modal",{attrs:{"ok-text":"Save permissions",width:"400",title:"Edit group's permissions"},on:{"on-ok":t.saveGroup},model:{value:t.permissionGroupModal,callback:function(e){t.permissionGroupModal=e},expression:"permissionGroupModal"}},[a("p",[t._v("Grant or deny users access to some system features by setting them to a given group.")]),t._v(" "),a("div",{staticClass:"permissions"},[a("Collapse",t._l(t.permissions,function(e){return a("Panel",{key:e.model,staticClass:"permBox",attrs:{name:e.model}},[a("div",{staticClass:"permBoxHeading"},[a("h3",[t._v(t._s(e.title))]),t._v(" "),a("p",[t._v(t._s(e.summary))])]),t._v(" "),a("div",{staticClass:"permissionAllowDeny",attrs:{slot:"content"},slot:"content"},t._l(e.permissions,function(i,s){return a("form",{key:s,staticClass:"permBoxForm"},t._l(i,function(i,s){return a("div",{key:s,staticClass:"permInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.permissionsCheck,expression:"permissionsCheck"}],attrs:{type:"checkbox",id:t.inputLabel(e.model,i.codename)},domProps:{value:i.id,checked:Array.isArray(t.permissionsCheck)?t._i(t.permissionsCheck,i.id)>-1:t.permissionsCheck},on:{change:function(e){var a=t.permissionsCheck,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=i.id,n=t._i(a,o);s.checked?n<0&&(t.permissionsCheck=a.concat([o])):n>-1&&(t.permissionsCheck=a.slice(0,n).concat(a.slice(n+1)))}else t.permissionsCheck=r}}}),t._v(" "),a("label",{staticClass:"permInfo",attrs:{for:t.inputLabel(e.model,i.codename)}},[t._v(t._s(i.name))])])}),0)}),0)])}),1)],1)])],1),t._v(" "),a("div",{staticClass:"button-group delete-group"},[a("button",{staticClass:"btn-gray",on:{click:function(e){t.deleteGroupModal=!0}}},[t._v("Delete group")]),t._v(" "),a("Modal",{staticClass:"delete-group",attrs:{"ok-text":"Delete group",width:"400",title:"Delete "+t.userGroup.name+"?"},on:{"on-ok":t.deleteGroup},model:{value:t.deleteGroupModal,callback:function(e){t.deleteGroupModal=e},expression:"deleteGroupModal"}},[a("p",[t._v("Users in this group will not be affected. Deleting a group can't be undone.")])])],1)])])]),t._v(" "),a("div",{staticClass:"page-info"},[a("dl",{staticClass:"d-none"},[a("dt",{staticClass:"group-title"},[t._v("Group members")]),t._v(" "),a("dd",{staticClass:"group-members"},[a("span",[t._v(t._s(t.pageData.totalRecords))])])])]),t._v(" "),a("div",{staticClass:"content-data"},[a("div",{staticClass:"items-search"},[a("div",{staticClass:"items-search-padding"},[a("div",{staticClass:"items-search-w"},[a("div",{staticClass:"items-search-padding-pane"},[a("div",{staticClass:"items-search-padding-pane-inner"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.fq,expression:"search.fq"}],staticClass:"input",attrs:{size:"60"},domProps:{value:t.search.fq},on:{keyup:function(e){return e.preventDefault(),t.fetchUsers()},input:function(e){e.target.composing||t.$set(t.search,"fq",e.target.value)}}}),t._v(" "),a("span",{staticClass:"items-search-icon"},[a("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",focusable:"false",role:"presentation"}},[a("path",{attrs:{d:"M16.436 15.085l3.94 4.01a1 1 0 0 1-1.425 1.402l-3.938-4.006a7.5 7.5 0 1 1 1.423-1.406zM10.5 16a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11z",fill:"currentColor","fill-rule":"evenodd"}})])])])])])])]),t._v(" "),a("Table",{attrs:{columns:t.userColumns,data:t.users,loading:t.pageData.loading}}),t._v(" "),!t.pageData.loading&&t.pageData.totalPages>1?a("Page",{attrs:{total:t.pageData.totalRecords,current:t.pageData.currentPage},on:{"on-change":t.paginateAction}}):t._e()],1)])},staticRenderFns:[]};var O=a("VU/8")(Q,G,!1,function(t){a("yUOA")},"data-v-1ba384b7",null).exports,N={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var S=a("VU/8")({},N,!1,function(t){a("pXP2")},"data-v-f21b75a2",null).exports,L={mounted:function(){this.$store.getters.getLoggedIn||this.$router.push({name:"accounts_login"}),this.checkPermissions.validatePermission(this.allPermissions.view_project,this.$store.getters.getPermissions)||(this.$notify({group:"error",type:"warning",text:"You do not have permissions to view this page."}),this.$router.push({name:"home"}))},data:function(){return{newProjectModal:!1,columns:[{title:"Name",align:"left",width:250,sortable:!0,render:function(t,e){return t("span",e.row.name)}},{title:"Lead",align:"left",render:function(t,e){return t("span",e.row.lead.first_name+" "+e.row.lead.last_name)}}],projects:[],pageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},search:{q:""},projectLeads:[],formErrors:[],formData:{name:"",lead:"",description:"",owner_name:"",owner_email:""}}},methods:{fetchProjects:function(t){var e=this;this.pageData.loading=!0;var a={limit:this.constants.PAGE_LIMIT,offset:t,q:this.search.q};this.api.projectsDirectory("get",a,null).then(function(t){var a=t.data;e.pageData.totalRecords=a.count,e.pageData.totalPages=a.total_pages,e.pageData.currentPage=a.current_page,e.projects=a.results,e.pageData.loading=!1}).catch(function(t){e.$notify({group:"error",type:"warn",text:t.response.data.detail}),e.pageData.loading=!1})},paginateAction:function(t){this.fetchProjects(t)},saveProject:function(){var t=this;this.api.projectsDirectory("post",null,this.formData).then(function(e){t.$notify({group:"success",type:"success",text:"Project successfully created"}),t.formErrors=[],t.fetchProjects()}).catch(function(e){t.formErrors=e.response.data,t.formErrors.detail?t.$notify({group:"error",type:"warning",text:t.formErrors.detail}):setTimeout(function(){t.newProjectModal=!0},0)})},fetchLeads:function(){var t=this;this.api.projectLeads().then(function(e){t.projectLeads=e.data.results}).catch(function(t){console.log(t.response.data.detail)})},viewProject:function(t){this.$router.push({name:"project_details",params:{slug:t.slug}})}},created:function(){this.fetchProjects(null,!0),this.fetchLeads()}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-header"},[t._m(0),t._v(" "),a("div",{staticClass:"left-links"},[a("div",{staticClass:"buttons"},[a("div",{staticClass:"button-group"},[a("button",{staticClass:"btn gray",on:{click:function(e){return e.preventDefault(),t.fetchProjects(e)}}},[t._v("Refresh")])]),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.add_project,this.$store.getters.getPermissions)?a("div",{staticClass:"button-group"},[a("button",{staticClass:"btn green",on:{click:function(e){t.newProjectModal=!0}}},[t._v("Create project")]),t._v(" "),a("Modal",{attrs:{"ok-text":"Create project",width:"400",title:"Create project"},on:{"on-ok":t.saveProject},model:{value:t.newProjectModal,callback:function(e){t.newProjectModal=e},expression:"newProjectModal"}},[a("p",[t._v("When you create the project, you'll be able to add members and keep track of the progress.")]),t._v(" "),a("form",[a("div",[a("label",{attrs:{for:"name"}},[t._v("Project's name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"input",class:t.formErrors.name?"invalid-input":"",attrs:{required:t.formData.name,type:"text",value:"",name:"name",placeholder:"",id:"name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),t.formErrors.name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.name[0]))]):t._e()]),t._v(" "),a("div",[a("label",{attrs:{for:"lead"}},[t._v("Lead")]),t._v(" "),a("Select",{class:t.formErrors.lead&&""===t.formData.lead?"invalid-input":"",attrs:{id:"lead"},model:{value:t.formData.lead,callback:function(e){t.$set(t.formData,"lead",e)},expression:"formData.lead"}},t._l(t.projectLeads,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1),t._v(" "),t.formErrors.lead?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.lead[0]))]):t._e()],1),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w50 float-left"},[a("label",{attrs:{for:"owner_name"}},[t._v("Owner's name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.owner_name,expression:"formData.owner_name"}],staticClass:"input",class:t.formErrors.owner_name?"invalid-input":"",attrs:{required:t.formData.owner_name,type:"text",value:"",name:"owner_name",placeholder:"",id:"owner_name"},domProps:{value:t.formData.owner_name},on:{input:function(e){e.target.composing||t.$set(t.formData,"owner_name",e.target.value)}}}),t._v(" "),t.formErrors.owner_name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.owner_name[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w50 float-right"},[a("label",{attrs:{for:"owner_email"}},[t._v("Owner's email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.owner_email,expression:"formData.owner_email"}],staticClass:"input",class:t.formErrors.owner_email?"invalid-input":"",attrs:{required:t.formData.owner_email,type:"email",value:"",name:"owner_email",placeholder:"",id:"owner_email"},domProps:{value:t.formData.owner_email},on:{input:function(e){e.target.composing||t.$set(t.formData,"owner_email",e.target.value)}}}),t._v(" "),t.formErrors.owner_email?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.owner_email[0]))]):t._e()])]),t._v(" "),a("div",[a("label",{attrs:{for:"description"}},[t._v("Description")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.description,expression:"formData.description"}],staticClass:"input",class:t.formErrors.description?"invalid-input":"",attrs:{required:t.formData.description,name:"description",placeholder:"",id:"description"},domProps:{value:t.formData.description},on:{input:function(e){e.target.composing||t.$set(t.formData,"description",e.target.value)}}}),t._v(" "),t.formErrors.description?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.description[0]))]):t._e()])])])],1):t._e()])])]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"content-data"},[a("Table",{attrs:{columns:t.columns,data:t.projects,loading:t.pageData.loading},on:{"on-row-click":t.viewProject}}),t._v(" "),!t.pageData.loading&&t.pageData.totalPages>1?a("Page",{attrs:{total:t.pageData.totalRecords,current:t.pageData.currentPage},on:{"on-change":t.paginateAction}}):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("span",{staticClass:"text"},[this._v("Projects")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-info"},[e("span",[this._v("\n      Click on a given project to view more options like bidding, quotations, files, fabrication etc.\n    ")])])}]};var V=a("VU/8")(L,Y,!1,function(t){a("oXVK")},"data-v-656dd11a",null).exports,W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-header"},[t._m(0),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.view_project,this.$store.getters.getPermissions)?a("router-link",{staticClass:"top-menu-links",attrs:{to:{name:"project_overview",params:{slug:t.slug}},activeClass:"active"}},[a("div",{staticClass:"-text"},[a("div",{staticClass:"-text-one"},[t._v("Overview")])])]):t._e(),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.view_projectfile,this.$store.getters.getPermissions)?a("router-link",{staticClass:"top-menu-links",attrs:{to:{name:"project_files",params:{slug:t.slug}},activeClass:"active"}},[a("div",{staticClass:"-text"},[a("div",{staticClass:"-text-one"},[t._v("Files")])])]):t._e(),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.view_projectequipment,this.$store.getters.getPermissions)?a("router-link",{staticClass:"top-menu-links",attrs:{to:{name:"project_budget",params:{slug:t.slug}},activeClass:"active"}},[a("div",{staticClass:"-text"},[a("div",{staticClass:"-text-one"},[t._v("Budget")])])]):t._e(),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.view_projectbudget,this.$store.getters.getPermissions)?a("router-link",{staticClass:"top-menu-links",attrs:{to:{name:"project_bidding",params:{slug:t.slug}},activeClass:"active"}},[a("div",{staticClass:"-text"},[a("div",{staticClass:"-text-one"},[t._v("Bidding")])])]):t._e(),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.view_projectquote,this.$store.getters.getPermissions)?a("router-link",{staticClass:"top-menu-links",attrs:{to:{name:"project_quotation",params:{slug:t.slug}},activeClass:"active"}},[a("div",{staticClass:"-text"},[a("div",{staticClass:"-text-one"},[t._v("Quotation")])])]):t._e(),t._v(" "),a("router-link",{staticClass:"top-menu-links",attrs:{to:{name:"project_fabrication",params:{slug:t.slug}},activeClass:"active"}},[a("div",{staticClass:"-text"},[a("div",{staticClass:"-text-one"},[t._v("Fabrication")])])])],1),t._v(" "),a("router-view")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("span",{staticClass:"text"},[this._v("Project")])])}]};var J=a("VU/8")({mounted:function(){this.$store.getters.getLoggedIn||this.$router.push({name:"accounts_login"})},data:function(){return{projectData:[],slug:this.$route.params.slug}},methods:{fetchProject:function(){var t=this;this.api.viewProject(this.slug,"get",null,null).then(function(e){t.projectData=e.data}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail})})}},created:function(){this.fetchProject()}},W,!1,function(t){a("7WuQ")},"data-v-09cedb29",null).exports,z={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"content-data"})},staticRenderFns:[]};var H=a("VU/8")({data:function(){return{projectData:[],slug:this.$route.params.slug}},methods:{fetchProject:function(){var t=this;this.api.viewProject(this.slug,"get",null,null).then(function(e){t.projectData=e.data}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail})})}},created:function(){this.fetchProject()}},z,!1,function(t){a("3jIM")},"data-v-4eab8216",null).exports,X={data:function(){var t=this;return{newFileModal:!1,viewFileModal:!1,selectedFile:[],columns:[{title:"Name",align:"left",sortable:!0,render:function(t,e){return t("span",e.row.name)}},{title:"File URL",align:"left",sortable:!0,render:function(e,a){return e("Button",{props:{type:"default",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showPreviewFile(a.index)}}},"View")}}],projectData:[],slug:this.$route.params.slug,files:[],pageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},search:{q:""},formErrors:[],formData:{name:"",description:"",project:"",document:""}}},methods:{showPreviewFile:function(t){this.selectedFile=this.files[t],this.viewFileModal=!0},onFileChange:function(t){this.formData.document=this.$refs.file.files[0]},fetchProject:function(){var t=this;this.api.viewProject(this.slug,"get",null,null).then(function(e){t.projectData=e.data,t.fetchFiles()}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail})})},paginateAction:function(t){this.fetchFiles(t)},fetchFiles:function(t){var e=this;this.pageData.loading=!0;var a={limit:this.constants.PAGE_LIMIT,offset:t,project:this.projectData.id,q:this.search.q};this.api.viewFiles("get",a,null,null).then(function(t){var a=t.data;e.pageData.totalRecords=a.count,e.pageData.totalPages=a.total_pages,e.pageData.currentPage=a.current_page,e.files=a.results,e.pageData.loading=!1}).catch(function(t){console.log(t.response),e.$notify({group:"error",type:"warn",text:t.response.data.detail}),e.pageData.loading=!1})},uploadFile:function(){var t=this,e=new FormData;e.append("name",this.formData.name),e.append("description",this.formData.description),e.append("project",this.projectData.id),e.append("document",this.formData.document),this.api.viewFiles("post",null,e,!0).then(function(e){t.$notify({group:"success",type:"success",text:"File successfully uploaded"}),t.formErrors=[],t.fetchFiles()}).catch(function(e){t.formErrors=e.response.data,t.formErrors.detail?t.$notify({group:"error",type:"warning",text:t.formErrors.detail}):setTimeout(function(){t.newFileModal=!0},0)})}},created:function(){this.fetchProject()},mounted:function(){this.$store.getters.getLoggedIn||this.$router.push({name:"accounts_login"}),this.checkPermissions.validatePermission(this.allPermissions.view_projectfile,this.$store.getters.getPermissions)||(this.$notify({group:"error",type:"warning",text:"You do not have permissions to view this page."}),this.$router.push({name:"home"}))}},K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bottom-header"},[t._m(0),t._v(" "),a("div",{staticClass:"left-links"},[a("div",{staticClass:"buttons"},[a("div",{staticClass:"button-group"},[this.checkPermissions.validatePermission(this.allPermissions.add_projectfile,this.$store.getters.getPermissions)?a("button",{staticClass:"btn green",on:{click:function(e){t.newFileModal=!0}}},[t._v("Upload file")]):t._e(),t._v(" "),a("Modal",{attrs:{"ok-text":"Upload file",width:"400",title:"Upload a new file"},on:{"on-ok":t.uploadFile},model:{value:t.newFileModal,callback:function(e){t.newFileModal=e},expression:"newFileModal"}},[a("p",[t._v("You can upload any document required in this project on this page.")]),t._v(" "),a("form",{attrs:{method:"post",enctype:"multipart/form-data"}},[a("div",[a("label",{attrs:{for:"name"}},[t._v("File's name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"input",class:t.formErrors.name?"invalid-input":"",attrs:{required:t.formData.name,type:"text",value:"",name:"name",placeholder:"",id:"name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),t.formErrors.name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.name[0]))]):t._e()]),t._v(" "),a("div",[a("label",{attrs:{for:"description"}},[t._v("Description")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.description,expression:"formData.description"}],staticClass:"input",class:t.formErrors.description?"invalid-input":"",attrs:{required:t.formData.description,name:"description",placeholder:"",id:"description"},domProps:{value:t.formData.description},on:{input:function(e){e.target.composing||t.$set(t.formData,"description",e.target.value)}}}),t._v(" "),t.formErrors.description?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.description[0]))]):t._e()]),t._v(" "),a("div",[a("label",{attrs:{for:"document"}},[t._v("Select file")]),t._v(" "),a("input",{ref:"file",staticClass:"input",class:t.formErrors.document?"invalid-input":"",attrs:{required:t.formData.document,type:"file",name:"document",placeholder:"",id:"document"},on:{change:t.onFileChange}}),t._v(" "),t.formErrors.document?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.document[0]))]):t._e()])])])],1)])])]),t._v(" "),a("div",{staticClass:"content-data"},[a("Modal",{attrs:{"ok-text":"Delete file",width:"600",title:"File preview"},model:{value:t.viewFileModal,callback:function(e){t.viewFileModal=e},expression:"viewFileModal"}},[a("p",[t._v("You can preview and delete a given file.")]),t._v(" "),a("br"),t._v(" "),a("iframe",{attrs:{width:"565",height:"400",src:"https://docs.google.com/gview?url="+t.selectedFile.document+"&embedded=true"}})]),t._v(" "),a("Table",{attrs:{columns:t.columns,data:t.files,loading:t.pageData.loading}}),t._v(" "),!t.pageData.loading&&t.pageData.totalPages>1?a("Page",{attrs:{total:t.pageData.totalRecords,current:t.pageData.currentPage},on:{"on-change":t.paginateAction}}):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("span",{staticClass:"text"},[this._v("Files")])])}]};var Z=a("VU/8")(X,K,!1,function(t){a("t8LG")},"data-v-6d6df9da",null).exports,tt={data:function(){var t=this;return{newBudgetModal:!1,deleteBudgetModal:!1,editBudgetModal:!1,newEquipmentModal:!1,deleteEquipmentModal:!1,editEquipmentModal:!1,columns:[{title:"Name",align:"left",sortable:!0,render:function(t,e){return t("span",e.row.name)}},{title:"Cost",align:"left",sortable:!0,render:function(t,e){return t("span",e.row.unit_cost+" "+e.row.unit_cost_in)}},{title:"Action",align:"left",width:150,render:function(e,a){return e("div",[e("Button",{props:{type:"default",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showEditBudget(a.index)}}},"Edit"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.showDeleteBudget(a.index)}}},"Delete")])}}],equipmentColumns:[{title:"Name",align:"left",sortable:!0,render:function(t,e){return t("span",e.row.name)}},{title:"Weight",align:"left",sortable:!0,width:150,render:function(t,e){return t("span",e.row.weight+" "+e.row.weight_in)}},{title:"Unit cost",align:"left",sortable:!0,width:150,render:function(t,e){return t("span",e.row.unit_cost+" "+e.row.unit_cost_in)}},{title:"Estimated quantity",align:"left",sortable:!0,width:180,render:function(t,e){return t("span",e.row.estimated_quantity)}},{title:"Action",align:"left",width:150,render:function(e,a){return e("div",[e("Button",{props:{type:"default",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showEditEquipment(a.index)}}},"Edit"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.showDeleteEquipment(a.index)}}},"Delete")])}}],projectData:[],slug:this.$route.params.slug,budgets:[],equipments:[],pageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},search:{q:""},equipPageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},equipSearch:{q:""},formErrors:[],formData:{name:"",unit_cost:"",unit_cost_in:"",description:"",project:""},equipFormData:{project:"",name:"",unit_cost:"",unit_cost_in:"",length:"",width:"",height:"",measurement_in:"",weight:"",weight_in:"",estimated_quantity:"",description:""},selectedBudget:[],selectedEquipment:[]}},methods:{fetchProject:function(){var t=this;this.api.viewProject(this.slug,"get",null,null).then(function(e){t.projectData=e.data,t.fetchBudgets(),t.fetchEquipments()}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail})})},paginateAction:function(t){this.fetchBudgets(t)},fetchBudgets:function(t){var e=this;this.pageData.loading=!0;var a={limit:this.constants.PAGE_LIMIT,offset:t,project:this.projectData.id,q:this.search.q};this.api.viewBudgets("get",a,null,null).then(function(t){var a=t.data;e.pageData.totalRecords=a.count,e.pageData.totalPages=a.total_pages,e.pageData.currentPage=a.current_page,e.budgets=a.results,e.pageData.loading=!1}).catch(function(t){console.log(t.response),e.$notify({group:"error",type:"warn",text:t.response.data.detail}),e.pageData.loading=!1})},fetchEquipments:function(t){var e=this;this.equipPageData.loading=!0;var a={limit:this.constants.PAGE_LIMIT,offset:t,project:this.projectData.id,q:this.equipSearch.q};this.api.viewEquipments("get",a,null,null).then(function(t){var a=t.data;e.equipPageData.totalRecords=a.count,e.equipPageData.totalPages=a.total_pages,e.equipPageData.currentPage=a.current_page,e.equipments=a.results,e.equipPageData.loading=!1}).catch(function(t){e.$notify({group:"error",type:"warn",text:t.response.data.detail}),e.equipPageData.loading=!1})},createBudget:function(){var t=this;this.formData.project=this.projectData.id,this.api.viewBudgets("post",null,this.formData).then(function(e){t.$notify({group:"success",type:"success",text:"Budget item successfully created"}),t.formErrors=[],t.fetchBudgets()}).catch(function(e){t.formErrors=e.response.data,t.formErrors.detail?t.$notify({group:"error",type:"warning",text:t.formErrors.detail}):setTimeout(function(){t.newBudgetModal=!0},0)})},createEquipment:function(){var t=this;this.equipFormData.project=this.projectData.id,this.api.viewEquipments("post",null,this.equipFormData).then(function(e){t.$notify({group:"success",type:"success",text:"Equipment successfully created"}),t.formErrors=[],t.fetchEquipments()}).catch(function(e){t.formErrors=e.response.data,t.formErrors.detail?t.$notify({group:"error",type:"warning",text:t.formErrors.detail}):setTimeout(function(){t.newEquipmentModal=!0},0)})},showDeleteBudget:function(t){this.selectedBudget=this.budgets[t],this.deleteBudgetModal=!0},showEditBudget:function(t){this.selectedBudget=this.budgets[t],this.editBudgetModal=!0},deleteBudget:function(){var t=this;this.api.viewBudget(this.selectedBudget.slug,"delete",null,null).then(function(e){t.$notify({group:"success",type:"success",text:"Budget item deleted successfully"}),t.fetchBudgets()}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail})})},saveBudget:function(){var t=this;this.selectedBudget.project=this.selectedBudget.project.id,this.api.viewBudget(this.selectedBudget.slug,"put",null,this.selectedBudget).then(function(e){t.$notify({group:"success",type:"success",text:"Budget item successfully updated"}),t.formErrors=[],t.fetchBudgets()}).catch(function(e){console.log(e.response),t.formErrors=e.response.data,t.formErrors.detail?t.$notify({group:"error",type:"warning",text:t.formErrors.detail}):setTimeout(function(){t.editBudgetModal=!0},0)})},showDeleteEquipment:function(t){this.selectedEquipment=this.equipments[t],this.deleteEquipmentModal=!0},showEditEquipment:function(t){this.selectedEquipment=this.equipments[t],this.equipFormData=this.selectedEquipment,this.editEquipmentModal=!0},deleteEquipment:function(){var t=this;this.api.viewEquipment(this.selectedEquipment.slug,"delete",null,null).then(function(e){t.$notify({group:"success",type:"success",text:"Equipment item deleted successfully"}),t.fetchEquipments()}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail})})},saveEquipment:function(){var t=this;this.selectedEquipment.project=this.selectedEquipment.project.id,this.api.viewEquipment(this.selectedEquipment.slug,"put",null,this.selectedEquipment).then(function(e){t.$notify({group:"success",type:"success",text:"Equipment item successfully updated"}),t.formErrors=[],t.fetchEquipments()}).catch(function(e){console.log(e.response),t.formErrors=e.response.data,t.formErrors.detail?t.$notify({group:"error",type:"warning",text:t.formErrors.detail}):setTimeout(function(){t.editBudgetModal=!0},0)})}},created:function(){this.fetchProject()},mounted:function(){this.$store.getters.getLoggedIn||this.$router.push({name:"accounts_login"}),this.checkPermissions.validatePermission(this.allPermissions.view_projectequipment,this.$store.getters.getPermissions)||(this.$notify({group:"error",type:"warning",text:"You do not have permissions to view this page."}),this.$router.push({name:"home"}))}},et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bottom-header"},[t._m(0),t._v(" "),a("div",{staticClass:"left-links"},[a("div",{staticClass:"buttons"},[a("div",{staticClass:"button-group"},[this.checkPermissions.validatePermission(this.allPermissions.add_projectequipment,this.$store.getters.getPermissions)?a("button",{staticClass:"btn green",on:{click:function(e){t.newEquipmentModal=!0}}},[t._v("Create equipment")]):t._e(),t._v(" "),a("Modal",{attrs:{"ok-text":"Create equipment",width:"400",title:"Create equipment item"},on:{"on-ok":t.createEquipment},model:{value:t.newEquipmentModal,callback:function(e){t.newEquipmentModal=e},expression:"newEquipmentModal"}},[a("p",[t._v("This equipment item will be assigned only to this project.")]),t._v(" "),a("form",{attrs:{method:"post",enctype:"multipart/form-data"}},[a("div",[a("label",{attrs:{for:"name"}},[t._v("Equipment's name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.name,expression:"equipFormData.name"}],staticClass:"input",class:t.formErrors.name?"invalid-input":"",attrs:{required:t.equipFormData.name,type:"text",value:"",name:"name",placeholder:"",id:"name"},domProps:{value:t.equipFormData.name},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"name",e.target.value)}}}),t._v(" "),t.formErrors.name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.name[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w50 float-left"},[a("label",{attrs:{for:"unit_cost"}},[t._v("Unit cost")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.unit_cost,expression:"equipFormData.unit_cost"}],staticClass:"input",class:t.formErrors.unit_cost?"invalid-input":"",attrs:{required:t.equipFormData.unit_cost,type:"number",value:"",name:"unit_cost",placeholder:"",id:"unit_cost"},domProps:{value:t.equipFormData.unit_cost},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"unit_cost",e.target.value)}}}),t._v(" "),t.formErrors.unit_cost?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.unit_cost[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w50 float-right"},[a("label",{attrs:{for:"unit_cost_in"}},[t._v("Unit cost currency")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.unit_cost_in,expression:"equipFormData.unit_cost_in"}],staticClass:"input",class:t.formErrors.unit_cost_in?"invalid-input":"",attrs:{required:t.equipFormData.unit_cost_in,type:"text",value:"",name:"unit_cost_in",placeholder:"",id:"unit_cost_in"},domProps:{value:t.equipFormData.unit_cost_in},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"unit_cost_in",e.target.value)}}}),t._v(" "),t.formErrors.unit_cost_in?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.unit_cost_in[0]))]):t._e()])]),t._v(" "),a("div",[a("label",{attrs:{for:"estimated_quantity"}},[t._v("Estimated quantity")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.estimated_quantity,expression:"equipFormData.estimated_quantity"}],staticClass:"input",class:t.formErrors.estimated_quantity?"invalid-input":"",attrs:{required:t.equipFormData.estimated_quantity,type:"number",value:"",name:"estimated_quantity",placeholder:"",id:"estimated_quantity"},domProps:{value:t.equipFormData.estimated_quantity},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"estimated_quantity",e.target.value)}}}),t._v(" "),t.formErrors.estimated_quantity?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.estimated_quantity[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w30 float-left"},[a("label",{attrs:{for:"length"}},[t._v("Length")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.length,expression:"equipFormData.length"}],staticClass:"input",class:t.formErrors.length?"invalid-input":"",attrs:{required:t.equipFormData.length,type:"number",value:"",name:"length",placeholder:"",id:"length"},domProps:{value:t.equipFormData.length},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"length",e.target.value)}}}),t._v(" "),t.formErrors.length?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.length[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w30"},[a("label",{attrs:{for:"width"}},[t._v("Width")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.width,expression:"equipFormData.width"}],staticClass:"input",class:t.formErrors.width?"invalid-input":"",attrs:{required:t.equipFormData.width,type:"number",value:"",name:"width",placeholder:"",id:"width"},domProps:{value:t.equipFormData.width},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"width",e.target.value)}}}),t._v(" "),t.formErrors.width?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.width[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w30 float-right"},[a("label",{attrs:{for:"height"}},[t._v("Height")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.height,expression:"equipFormData.height"}],staticClass:"input",class:t.formErrors.height?"invalid-input":"",attrs:{required:t.equipFormData.height,type:"number",value:"",name:"height",placeholder:"",id:"height"},domProps:{value:t.equipFormData.height},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"height",e.target.value)}}}),t._v(" "),t.formErrors.height?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.height[0]))]):t._e()])]),t._v(" "),a("div",[a("label",{attrs:{for:"measurement_in"}},[t._v("Unit of measurement")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.measurement_in,expression:"equipFormData.measurement_in"}],staticClass:"input",class:t.formErrors.measurement_in?"invalid-input":"",attrs:{required:t.equipFormData.measurement_in,type:"text",value:"",name:"measurement_in",placeholder:"",id:"measurement_in"},domProps:{value:t.equipFormData.measurement_in},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"measurement_in",e.target.value)}}}),t._v(" "),t.formErrors.width?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.width[0]))]):t._e()]),t._v(" "),a("div",[a("label",{attrs:{for:"description"}},[t._v("Description")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.description,expression:"equipFormData.description"}],staticClass:"input",class:t.formErrors.description?"invalid-input":"",attrs:{required:t.equipFormData.description,name:"description",placeholder:"",id:"description"},domProps:{value:t.equipFormData.description},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"description",e.target.value)}}}),t._v(" "),t.formErrors.description?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.description[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w50 float-left"},[a("label",{attrs:{for:"weight"}},[t._v("Weight")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.weight,expression:"equipFormData.weight"}],staticClass:"input",class:t.formErrors.weight?"invalid-input":"",attrs:{required:t.equipFormData.weight,type:"number",value:"",name:"weight",placeholder:"",id:"weight"},domProps:{value:t.equipFormData.weight},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"weight",e.target.value)}}}),t._v(" "),t.formErrors.weight?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.weight[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w50 float-right"},[a("label",{attrs:{for:"weight_in"}},[t._v("Weight in")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.weight_in,expression:"equipFormData.weight_in"}],staticClass:"input",class:t.formErrors.weight_in?"invalid-input":"",attrs:{required:t.equipFormData.weight_in,type:"text",value:"",name:"measurement_in",placeholder:"",id:"weight_in"},domProps:{value:t.equipFormData.weight_in},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"weight_in",e.target.value)}}}),t._v(" "),t.formErrors.weight_in?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.weight_in[0]))]):t._e()])])])]),t._v(" "),a("Modal",{staticClass:"delete-group",attrs:{"ok-text":"Delete equipment item",width:"400",title:"Delete equipment item"},on:{"on-ok":t.deleteEquipment},model:{value:t.deleteEquipmentModal,callback:function(e){t.deleteEquipmentModal=e},expression:"deleteEquipmentModal"}},[a("p",[t._v('You are about to delete "'),a("strong",[t._v(t._s(t.selectedEquipment.name))]),t._v('" equipment item. This action cannot be undone.')])]),t._v(" "),a("Modal",{attrs:{"ok-text":"Save changes",width:"400",title:"Edit equipment item"},on:{"on-ok":function(e){return t.saveEquipment()}},model:{value:t.editEquipmentModal,callback:function(e){t.editEquipmentModal=e},expression:"editEquipmentModal"}},[a("form",{attrs:{method:"post",enctype:"multipart/form-data"}},[a("div",[a("label",{attrs:{for:"ename"}},[t._v("Equipment's name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.name,expression:"equipFormData.name"}],staticClass:"input",class:t.formErrors.name?"invalid-input":"",attrs:{required:t.equipFormData.name,type:"text",value:"",name:"name",placeholder:"",id:"ename"},domProps:{value:t.equipFormData.name},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"name",e.target.value)}}}),t._v(" "),t.formErrors.name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.name[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w50 float-left"},[a("label",{attrs:{for:"eunit_cost"}},[t._v("Unit cost")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.unit_cost,expression:"equipFormData.unit_cost"}],staticClass:"input",class:t.formErrors.unit_cost?"invalid-input":"",attrs:{required:t.equipFormData.unit_cost,type:"number",value:"",name:"unit_cost",placeholder:"",id:"eunit_cost"},domProps:{value:t.equipFormData.unit_cost},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"unit_cost",e.target.value)}}}),t._v(" "),t.formErrors.unit_cost?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.unit_cost[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w50 float-right"},[a("label",{attrs:{for:"eunit_cost_in"}},[t._v("Unit cost currency")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.unit_cost_in,expression:"equipFormData.unit_cost_in"}],staticClass:"input",class:t.formErrors.unit_cost_in?"invalid-input":"",attrs:{required:t.equipFormData.unit_cost_in,type:"text",value:"",name:"unit_cost_in",placeholder:"",id:"eunit_cost_in"},domProps:{value:t.equipFormData.unit_cost_in},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"unit_cost_in",e.target.value)}}}),t._v(" "),t.formErrors.unit_cost_in?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.unit_cost_in[0]))]):t._e()])]),t._v(" "),a("div",[a("label",{attrs:{for:"eestimated_quantity"}},[t._v("Estimated quantity")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.estimated_quantity,expression:"equipFormData.estimated_quantity"}],staticClass:"input",class:t.formErrors.estimated_quantity?"invalid-input":"",attrs:{required:t.equipFormData.estimated_quantity,type:"number",value:"",name:"estimated_quantity",placeholder:"",id:"eestimated_quantity"},domProps:{value:t.equipFormData.estimated_quantity},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"estimated_quantity",e.target.value)}}}),t._v(" "),t.formErrors.estimated_quantity?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.estimated_quantity[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w30 float-left"},[a("label",{attrs:{for:"elength"}},[t._v("Length")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.length,expression:"equipFormData.length"}],staticClass:"input",class:t.formErrors.length?"invalid-input":"",attrs:{required:t.equipFormData.length,type:"number",value:"",name:"length",placeholder:"",id:"elength"},domProps:{value:t.equipFormData.length},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"length",e.target.value)}}}),t._v(" "),t.formErrors.length?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.length[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w30"},[a("label",{attrs:{for:"ewidth"}},[t._v("Width")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.width,expression:"equipFormData.width"}],staticClass:"input",class:t.formErrors.width?"invalid-input":"",attrs:{required:t.equipFormData.width,type:"number",value:"",name:"width",placeholder:"",id:"ewidth"},domProps:{value:t.equipFormData.width},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"width",e.target.value)}}}),t._v(" "),t.formErrors.width?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.width[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w30 float-right"},[a("label",{attrs:{for:"eheight"}},[t._v("Height")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.height,expression:"equipFormData.height"}],staticClass:"input",class:t.formErrors.height?"invalid-input":"",attrs:{required:t.equipFormData.height,type:"number",value:"",name:"height",placeholder:"",id:"eheight"},domProps:{value:t.equipFormData.height},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"height",e.target.value)}}}),t._v(" "),t.formErrors.height?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.height[0]))]):t._e()])]),t._v(" "),a("div",[a("label",{attrs:{for:"emeasurement_in"}},[t._v("Unit of measurement")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.measurement_in,expression:"equipFormData.measurement_in"}],staticClass:"input",class:t.formErrors.measurement_in?"invalid-input":"",attrs:{required:t.equipFormData.measurement_in,type:"text",value:"",name:"measurement_in",placeholder:"",id:"emeasurement_in"},domProps:{value:t.equipFormData.measurement_in},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"measurement_in",e.target.value)}}}),t._v(" "),t.formErrors.width?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.width[0]))]):t._e()]),t._v(" "),a("div",[a("label",{attrs:{for:"edescription"}},[t._v("Description")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.description,expression:"equipFormData.description"}],staticClass:"input",class:t.formErrors.description?"invalid-input":"",attrs:{required:t.equipFormData.description,name:"description",placeholder:"",id:"edescription"},domProps:{value:t.equipFormData.description},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"description",e.target.value)}}}),t._v(" "),t.formErrors.description?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.description[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w50 float-left"},[a("label",{attrs:{for:"eweight"}},[t._v("Weight")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.weight,expression:"equipFormData.weight"}],staticClass:"input",class:t.formErrors.weight?"invalid-input":"",attrs:{required:t.equipFormData.weight,type:"number",value:"",name:"weight",placeholder:"",id:"eweight"},domProps:{value:t.equipFormData.weight},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"weight",e.target.value)}}}),t._v(" "),t.formErrors.weight?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.weight[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w50 float-right"},[a("label",{attrs:{for:"eweight_in"}},[t._v("Weight in")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.weight_in,expression:"equipFormData.weight_in"}],staticClass:"input",class:t.formErrors.weight_in?"invalid-input":"",attrs:{required:t.equipFormData.weight_in,type:"text",value:"",name:"measurement_in",placeholder:"",id:"eweight_in"},domProps:{value:t.equipFormData.weight_in},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"weight_in",e.target.value)}}}),t._v(" "),t.formErrors.weight_in?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.weight_in[0]))]):t._e()])])])])],1),t._v(" "),a("div",{staticClass:"button-group"},[this.checkPermissions.validatePermission(this.allPermissions.add_projectbudget,this.$store.getters.getPermissions)?a("button",{staticClass:"btn gray",on:{click:function(e){t.newBudgetModal=!0}}},[t._v("Create budget")]):t._e(),t._v(" "),a("Modal",{attrs:{"ok-text":"Create budget",width:"400",title:"Create budget item"},on:{"on-ok":t.createBudget},model:{value:t.newBudgetModal,callback:function(e){t.newBudgetModal=e},expression:"newBudgetModal"}},[a("p",[t._v("This item will be assigned only to this project.")]),t._v(" "),a("form",{attrs:{method:"post",enctype:"multipart/form-data"}},[a("div",[a("label",{attrs:{for:"bname"}},[t._v("Item's name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"input",class:t.formErrors.name?"invalid-input":"",attrs:{required:t.formData.name,type:"text",value:"",name:"bname",placeholder:"",id:"bname"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),t.formErrors.name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.name[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w50 float-left"},[a("label",{attrs:{for:"bunit_cost"}},[t._v("Unit cost")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.unit_cost,expression:"formData.unit_cost"}],staticClass:"input",class:t.formErrors.unit_cost?"invalid-input":"",attrs:{required:t.formData.unit_cost,type:"number",value:"",name:"bunit_cost",placeholder:"",id:"bunit_cost"},domProps:{value:t.formData.unit_cost},on:{input:function(e){e.target.composing||t.$set(t.formData,"unit_cost",e.target.value)}}}),t._v(" "),t.formErrors.unit_cost?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.unit_cost[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w50 float-right"},[a("label",{attrs:{for:"bunit_cost_in"}},[t._v("Unit cost currency")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.unit_cost_in,expression:"formData.unit_cost_in"}],staticClass:"input",class:t.formErrors.unit_cost_in?"invalid-input":"",attrs:{required:t.formData.unit_cost_in,type:"text",value:"",name:"bunit_cost_in",placeholder:"",id:"bunit_cost_in"},domProps:{value:t.formData.unit_cost_in},on:{input:function(e){e.target.composing||t.$set(t.formData,"unit_cost_in",e.target.value)}}}),t._v(" "),t.formErrors.unit_cost_in?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.unit_cost_in[0]))]):t._e()])]),t._v(" "),a("div",[a("label",{attrs:{for:"bdescription"}},[t._v("Description")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.description,expression:"formData.description"}],staticClass:"input",class:t.formErrors.description?"invalid-input":"",attrs:{required:t.formData.description,name:"bdescription",placeholder:"",id:"bdescription"},domProps:{value:t.formData.description},on:{input:function(e){e.target.composing||t.$set(t.formData,"description",e.target.value)}}}),t._v(" "),t.formErrors.description?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.description[0]))]):t._e()])])]),t._v(" "),a("Modal",{staticClass:"delete-group",attrs:{"ok-text":"Delete budget item",width:"400",title:"Delete budget item"},on:{"on-ok":t.deleteBudget},model:{value:t.deleteBudgetModal,callback:function(e){t.deleteBudgetModal=e},expression:"deleteBudgetModal"}},[a("p",[t._v('You are about to delete "'),a("strong",[t._v(t._s(t.selectedBudget.name))]),t._v('" budget item. This action cannot be undone.')])]),t._v(" "),a("Modal",{attrs:{"ok-text":"Save changes",width:"400",title:"Edit budget item"},on:{"on-ok":t.saveBudget},model:{value:t.editBudgetModal,callback:function(e){t.editBudgetModal=e},expression:"editBudgetModal"}},[a("form",{attrs:{method:"post",enctype:"multipart/form-data"}},[a("div",[a("label",{attrs:{for:"ebname"}},[t._v("Item's name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedBudget.name,expression:"selectedBudget.name"}],staticClass:"input",class:t.formErrors.name?"invalid-input":"",attrs:{type:"text",value:"",name:"bname",placeholder:"",id:"ebname"},domProps:{value:t.selectedBudget.name},on:{input:function(e){e.target.composing||t.$set(t.selectedBudget,"name",e.target.value)}}}),t._v(" "),t.formErrors.name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.name[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w50 float-left"},[a("label",{attrs:{for:"sbunit_cost"}},[t._v("Unit cost")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedBudget.unit_cost,expression:"selectedBudget.unit_cost"}],staticClass:"input",class:t.formErrors.unit_cost?"invalid-input":"",attrs:{type:"number",value:"",name:"bunit_cost",placeholder:"",id:"sbunit_cost"},domProps:{value:t.selectedBudget.unit_cost},on:{input:function(e){e.target.composing||t.$set(t.selectedBudget,"unit_cost",e.target.value)}}}),t._v(" "),t.formErrors.unit_cost?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.unit_cost[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w50 float-right"},[a("label",{attrs:{for:"sbunit_cost_in"}},[t._v("Unit cost currency")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedBudget.unit_cost_in,expression:"selectedBudget.unit_cost_in"}],staticClass:"input",class:t.formErrors.unit_cost_in?"invalid-input":"",attrs:{type:"text",value:"",name:"bunit_cost_in",placeholder:"",id:"sbunit_cost_in"},domProps:{value:t.selectedBudget.unit_cost_in},on:{input:function(e){e.target.composing||t.$set(t.selectedBudget,"unit_cost_in",e.target.value)}}}),t._v(" "),t.formErrors.unit_cost_in?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.unit_cost_in[0]))]):t._e()])]),t._v(" "),a("div",[a("label",{attrs:{for:"sbdescription"}},[t._v("Description")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.selectedBudget.description,expression:"selectedBudget.description"}],staticClass:"input",class:t.formErrors.description?"invalid-input":"",attrs:{required:t.formData.description,name:"bdescription",placeholder:"",id:"sbdescription"},domProps:{value:t.selectedBudget.description},on:{input:function(e){e.target.composing||t.$set(t.selectedBudget,"description",e.target.value)}}}),t._v(" "),t.formErrors.description?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.description[0]))]):t._e()])])])],1)])])]),t._v(" "),a("div",{staticClass:"content-data"},[a("Tabs",{attrs:{value:"budget_items",animated:!1}},[a("TabPane",{attrs:{label:"Budget items",name:"budget_items"}},[a("Table",{attrs:{columns:t.columns,data:t.budgets,loading:t.pageData.loading}}),t._v(" "),!t.pageData.loading&&t.pageData.totalPages>1?a("Page",{attrs:{total:t.pageData.totalRecords,current:t.pageData.currentPage},on:{"on-change":t.paginateAction}}):t._e()],1),t._v(" "),a("TabPane",{attrs:{label:"Project equipments",name:"budget_equipments"}},[a("Table",{attrs:{columns:t.equipmentColumns,data:t.equipments,loading:t.equipPageData.loading}}),t._v(" "),!t.equipPageData.loading&&t.equipPageData.totalPages>1?a("Page",{attrs:{total:t.equipPageData.totalRecords,current:t.equipPageData.currentPage},on:{"on-change":t.paginateAction}}):t._e()],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("span",{staticClass:"text"},[this._v("Budget")])])}]};var at=a("VU/8")(tt,et,!1,function(t){a("2clI")},"data-v-670b14fa",null).exports,it={data:function(){var t=this;return{projectData:[],buttonText:"",bidExists:!1,slug:this.$route.params.slug,projectBiddingModal:!1,newBidModal:!1,bids:[],columns:[{title:"Vendor",align:"left",render:function(t,e){return t("span",e.row.vendor.first_name+" "+e.row.vendor.last_name)}},{title:"Status",align:"left",width:200,render:function(t,e){return t("span",e.row.bid_status)}},{title:"Action",align:"left",width:150,render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showAccept(a.index)}}},"Accept"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.showDeny(a.index)}}},"Deny")])}}],pageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},search:{q:""},currentBid:[],currentBidColumns:[{title:"Vendor",align:"left",render:function(t,e){return t("span",e.row.vendor.first_name+" "+e.row.vendor.last_name)}},{title:"Project",align:"left",width:200,render:function(t,e){return t("span",e.row.project.name)}},{title:"Status",align:"left",width:100,render:function(t,e){return t("span",e.row.bid_status)}}],acceptBidModal:!1,denyBidModal:!1,selectedBid:[]}},methods:{fetchProject:function(){var t=this;this.api.viewProject(this.slug,"get",null,null).then(function(e){t.projectData=e.data,t.projectData.bidding?t.buttonText="Disable bidding":t.buttonText="Enable bidding",t.fetchBids(),t.checkIfBidExists()}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail})})},saveProject:function(){var t=this;this.projectData.bidding=!this.projectData.bidding,this.projectData.lead=this.projectData.lead.id,this.api.projectView(this.slug,"put",null,this.projectData).then(function(e){t.$notify({group:"success",type:"success",text:"Bidding successfully updated"}),t.formErrors=[],t.fetchProject()}).catch(function(e){console.log(e.response),t.formErrors=e.response.data,t.formErrors.detail?t.$notify({group:"error",type:"warning",text:t.formErrors.detail}):setTimeout(function(){t.projectBiddingModal=!0},0)})},paginateAction:function(t){this.fetchBids(t)},fetchBids:function(t){var e=this;this.pageData.loading=!0;var a={limit:this.constants.PAGE_LIMIT,offset:t,project:this.projectData.id,q:this.search.q};this.api.viewBids("get",a,null,null).then(function(t){var a=t.data;e.pageData.totalRecords=a.count,e.pageData.totalPages=a.total_pages,e.pageData.currentPage=a.current_page,e.bids=a.results,e.pageData.loading=!1}).catch(function(t){e.$notify({group:"error",type:"warn",text:t.response.data.detail}),e.pageData.loading=!1})},saveBid:function(){var t=this,e={project:this.projectData.id,vendor:this.$store.getters.getUserId,bid_status:"Open",rfq:!1};this.api.viewBids("post",null,e).then(function(e){t.$notify({group:"success",type:"success",text:"Bid submitted successfully"}),t.checkIfBidExists()}).catch(function(e){var a=e.response.data;a.non_field_errors&&t.$notify({group:"error",type:"warn",text:a.non_field_errors[0]})})},checkIfBidExists:function(){var t=this;if(this.checkPermissions.validatePermission(this.allPermissions.add_projectbid,this.$store.getters.getPermissions)){var e={project:this.projectData.id,e:!0};this.api.viewBids("get",e,null,null).then(function(e){var a=e.data;t.currentBid=a.results,t.bidExists=0!==a.count}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail}),t.pageData.loading=!1})}},showAccept:function(t){this.selectedBid=this.bids[t],this.acceptBidModal=!0},showDeny:function(t){this.selectedBid=this.bids[t],this.denyBidModal=!0},updateBidStatus:function(t,e){var a=this,i={bid_status:e,project:this.selectedBid.project.id,vendor:this.selectedBid.vendor.id,rfq:this.selectedBid.rfq};this.api.viewBid(t,"put",null,i).then(function(t){a.$notify({group:"success",type:"success",text:"Bid status updated successfully"}),a.fetchBids()}).catch(function(t){var e=t.response.data;e.non_field_errors&&a.$notify({group:"error",type:"warn",text:e.non_field_errors[0]})})}},created:function(){this.fetchProject()}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page-header page-header-inner"},[t._m(0),t._v(" "),a("div",{staticClass:"page-header-right"},[a("div",{staticClass:"buttons"},[this.checkPermissions.validatePermission(this.allPermissions.change_project,this.$store.getters.getPermissions)?a("div",{staticClass:"button-group"},[a("button",{class:t.projectData.bidding?"btn-delete":"btn-blue",on:{click:function(e){t.projectBiddingModal=!0}}},[t._v(t._s(t.buttonText))]),t._v(" "),a("Modal",{class:t.projectData.bidding?"delete-group":"",attrs:{"ok-text":t.buttonText,width:"400",title:"Change project bidding status"},on:{"on-ok":t.saveProject},model:{value:t.projectBiddingModal,callback:function(e){t.projectBiddingModal=e},expression:"projectBiddingModal"}},[a("p",[t._v("When you enable bidding, all registered vendors will be able to place bids which you can assess and accept or deny the user from submitting a quote.")])])],1):t._e(),t._v(" "),a("div",{staticClass:"button-group"},[a("button",{staticClass:"btn-gray",on:{click:function(e){return e.preventDefault(),t.fetchProject(e)}}},[t._v("Refresh")])])])])]),t._v(" "),a("div",{staticClass:"page-info"},[this.checkPermissions.validatePermission(this.allPermissions.change_project,this.$store.getters.getPermissions)?a("span",[t._v("\n      Manage project bidding and the list of vendors who can submit quotes on this project.\n    ")]):t._e(),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.add_projectbid,this.$store.getters.getPermissions)&&this.projectData.bidding?a("span",[t._v("\n      This project is open for bidding and vendors are able to submit their bids.\n    ")]):a("span",[t._v("\n      This project is currently not open for bidding.\n    ")])]),t._v(" "),a("div",{staticClass:"content-data"},[this.checkPermissions.validatePermission(this.allPermissions.add_projectbid,this.$store.getters.getPermissions)?a("div",{staticClass:"content-row"},[a("div",{staticClass:"content-are-one"},[!t.bidExists&&this.projectData.bidding?a("div",[a("legend",[t._v("Submit your bid")]),t._v(" "),t._m(1),t._v(" "),a("br"),t._v(" "),a("button",{staticClass:"btn-blue",on:{click:function(e){t.newBidModal=!0}}},[t._v("Submit bid")]),t._v(" "),a("Modal",{attrs:{"ok-text":"Submit bid",width:"400",title:"Submit your project bid"},on:{"on-ok":t.saveBid},model:{value:t.newBidModal,callback:function(e){t.newBidModal=e},expression:"newBidModal"}},[a("p",[t._v("You are about to submit your bid on this project.")])])],1):t._e(),t._v(" "),t.bidExists?a("div",[a("legend",[t._v("Check bid status")]),t._v(" "),t.bidExists&&"Open"===t.currentBid[0].bid_status?a("Alert",{attrs:{"show-icon":""}},[t._v("\n            You have already submitted your bid on this project. You can check the status of your bid below.\n          ")]):t._e(),t._v(" "),t.bidExists&&"Accepted"===t.currentBid[0].bid_status?a("Alert",{attrs:{type:"success","show-icon":""}},[t._v("\n            Your bid was accepted. Check on "),a("strong",[t._v("quotation")]),t._v(" page to submit your quote.\n          ")]):t._e(),t._v(" "),t.bidExists&&"Denied"===t.currentBid[0].bid_status?a("Alert",{attrs:{type:"warning","show-icon":""}},[t._v("\n            Your bid was denied. Your cannot bid again or submit any quotes on this project.\n          ")]):t._e(),t._v(" "),a("Table",{attrs:{columns:t.currentBidColumns,data:t.currentBid}})],1):t._e()]),t._v(" "),t.bidExists||!t.bidExists&&this.projectData.bidding?a("div",{staticClass:"content-area-two"},[t._m(2)]):t._e()]):t._e(),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.change_project,this.$store.getters.getPermissions)?a("div",[a("Table",{attrs:{columns:t.columns,data:t.bids,loading:t.pageData.loading}}),t._v(" "),!t.pageData.loading&&t.pageData.totalPages>1?a("Page",{attrs:{total:t.pageData.totalRecords,current:t.pageData.currentPage},on:{"on-change":t.paginateAction}}):t._e(),t._v(" "),a("Modal",{attrs:{"ok-text":"Accept bid",width:"400",title:"Accept vendor bid"},on:{"on-ok":function(e){return t.updateBidStatus(t.selectedBid.slug,"Accepted")}},model:{value:t.acceptBidModal,callback:function(e){t.acceptBidModal=e},expression:"acceptBidModal"}},[a("p",[t._v("When you accept this bid, this vendor will be able to send a quote once a request for quotation is made.")])]),t._v(" "),a("Modal",{staticClass:"delete-group",attrs:{"ok-text":"Deny bid",width:"400",title:"Deny vendor bid"},on:{"on-ok":function(e){return t.updateBidStatus(t.selectedBid.slug,"Denied")}},model:{value:t.denyBidModal,callback:function(e){t.denyBidModal=e},expression:"denyBidModal"}},[a("p",[t._v("When you deny this bid, this vendor will not be able to bid on this project again or send a quote once a request for quotation is made.")])])],1):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-header-left"},[e("h1",[e("div",{staticClass:"text"},[this._v("Bidding")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You can submit your bid by clicking on the "),e("strong",[this._v("Submit bid")]),this._v(" button bellow. You'll be requested to submit a quotation if your bid is accepted.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-info"},[e("div",{staticClass:"content-info-card"},[e("h4",[this._v("What you need to know")]),this._v(" "),e("ul",[e("li",[this._v("You can only bid once on this project")]),this._v(" "),e("li",[this._v("Bidding won't be enabled even if your current bid was denied.")])])])])}]};var rt=a("VU/8")(it,st,!1,function(t){a("gWv2")},"data-v-b2641f66",null).exports,ot={data:function(){var t=this;return{projectData:[],buttonText:"",bidExists:!1,slug:this.$route.params.slug,projectQuotationModal:!1,newBidModal:!1,newQuoteModal:!1,equipmentInfoModal:!1,quoteitems:[],columns:[{title:"Vendor",align:"left",width:200,render:function(t,e){return t("span",e.row.vendor.first_name+" "+e.row.vendor.last_name)}},{title:"Status",align:"left",render:function(t,e){return t("span",e.row.quote_status)}},{title:"Estimated Price",align:"left",render:function(t,e){return t("span",e.row.equipment.unit_cost)}},{title:"Quoted Price",align:"left",render:function(t,e){return t("span",e.row.quote_price)}},{title:"Action",align:"left",width:150,render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showAccept(a.index)}}},"Accept")])}}],quoteColumns:[{title:"Item",align:"left",render:function(e,a){return e("span",[e("span",{on:{click:function(){t.showEquipmentInfo(a.index)}}},a.row.equipment.name)])}},{title:"Status",align:"left",render:function(t,e){return t("span",e.row.quote_status)}},{title:"Quote",align:"left",render:function(t,e){return t("span",e.row.quote_price+" "+e.row.equipment.unit_cost_in)}},{title:"Action",align:"left",width:150,render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showNewQuote(a.index)}}},"Quote")])}}],pageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},quotesPageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},vendorQuotesPageData:{loading:!1,totalRecords:0,totalPages:0,currentPage:0},vendorQuotes:[],search:{q:""},currentBid:[],currentBidColumns:[{title:"Vendor",align:"left",render:function(t,e){return t("span",e.row.vendor.first_name+" "+e.row.vendor.last_name)}},{title:"Project",align:"left",width:200,render:function(t,e){return t("span",e.row.project.name)}},{title:"Status",align:"left",width:100,render:function(t,e){return t("span",e.row.bid_status)}}],acceptQuoteModal:!1,denyBidModal:!1,selectedBid:[],equipments:[],selectedEquipment:"",selectedQuoteItem:[],formErrors:[],equipmentInfo:[],equipFormData:[]}},methods:{fetchProject:function(){var t=this;this.api.viewProject(this.slug,"get",null,null).then(function(e){t.projectData=e.data,t.projectData.bidding?t.buttonText="Disable bidding":t.buttonText="Enable bidding",t.fetchEquipments(),t.fetchQuotes(),t.fetchQuoteItems(),t.checkIfBidExists(),t.fetchVendorQuoteItems()}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail})})},fetchEquipments:function(){var t=this,e={project:this.projectData.id};this.api.projectEquipments(e).then(function(e){t.equipments=e.data.results}).catch(function(e){var a=e.response.data;a.non_field_errors&&t.$notify({group:"error",type:"warn",text:a.non_field_errors[0]})})},saveProject:function(){var t=this;this.projectData.bidding=!this.projectData.bidding,this.projectData.lead=this.projectData.lead.id,this.api.projectView(this.slug,"put",null,this.projectData).then(function(e){t.$notify({group:"success",type:"success",text:"Bidding successfully updated"}),t.formErrors=[],t.fetchProject()}).catch(function(e){t.formErrors=e.response.data,t.formErrors.detail?t.$notify({group:"error",type:"warning",text:t.formErrors.detail}):setTimeout(function(){t.projectQuotationModal=!0},0)})},paginateAction:function(t){this.fetchQuoteItems(t)},fetchQuotes:function(t){var e=this,a={limit:this.constants.PAGE_LIMIT,offset:t,project:this.projectData.id,q:this.search.q};this.api.viewQuotes("get",a,null,null).then(function(t){var a=t.data;e.quotesPageData.totalRecords=a.count,e.quotesPageData.totalPages=a.total_pages,e.quotesPageData.currentPage=a.current_page}).catch(function(t){e.$notify({group:"error",type:"warn",text:t.response.data.detail})})},fetchQuoteItems:function(t){var e=this;this.pageData.loading=!0;var a={limit:this.constants.PAGE_LIMIT,offset:t,project:this.projectData.id,q:this.search.q,item:this.selectedEquipment};this.api.viewQuoteItems("get",a,null,null).then(function(t){var a=t.data;e.pageData.totalRecords=a.count,e.pageData.totalPages=a.total_pages,e.pageData.currentPage=a.current_page,e.quoteitems=a.results,e.pageData.loading=!1}).catch(function(t){e.$notify({group:"error",type:"warn",text:t.response.data.detail}),e.pageData.loading=!1})},fetchVendorQuoteItems:function(t){var e=this;this.vendorQuotesPageData.loading=!0;var a={limit:this.constants.PAGE_LIMIT,offset:t,project:this.projectData.id,q:this.search.q,vendor:this.$store.getters.getUserId};this.api.viewQuoteItems("get",a,null,null).then(function(t){var a=t.data;e.vendorQuotesPageData.totalRecords=a.count,e.vendorQuotesPageData.totalPages=a.total_pages,e.vendorQuotesPageData.currentPage=a.current_page,e.vendorQuotes=a.results,e.vendorQuotesPageData.loading=!1}).catch(function(t){e.$notify({group:"error",type:"warn",text:t.response.data.detail}),e.vendorQuotesPageData.loading=!1})},requestQuotation:function(){var t=this,e={project:this.projectData.id};this.api.viewQuotes("post",null,e).then(function(e){t.$notify({group:"success",type:"success",text:"RFQ submitted successfully"})}).catch(function(e){var a=e.response.data;a.non_field_errors&&t.$notify({group:"error",type:"warn",text:a.non_field_errors[0]})})},saveBid:function(){var t=this,e={project:this.projectData.id,vendor:this.$store.getters.getUserId,bid_status:"Open"};this.api.viewBids("post",null,e).then(function(e){t.$notify({group:"success",type:"success",text:"Bid submitted successfully"}),t.checkIfBidExists()}).catch(function(e){var a=e.response.data;a.non_field_errors&&t.$notify({group:"error",type:"warn",text:a.non_field_errors[0]})})},checkIfBidExists:function(){var t=this;if(this.checkPermissions.validatePermission(this.allPermissions.add_projectbid,this.$store.getters.getPermissions)){var e={project:this.projectData.id,e:!0};this.api.viewBids("get",e,null,null).then(function(e){var a=e.data;t.currentBid=a.results,t.bidExists=0!==a.count}).catch(function(e){t.$notify({group:"error",type:"warn",text:e.response.data.detail}),t.pageData.loading=!1})}},showAccept:function(t){this.selectedQuoteItem=this.quoteitems[t],this.acceptQuoteModal=!0},showDeny:function(t){this.selectedBid=this.quoteitems[t],this.denyBidModal=!0},showNewQuote:function(t){this.selectedQuoteItem=this.vendorQuotes[t],this.newQuoteModal=!0},showEquipmentInfo:function(t){this.equipmentInfo=this.vendorQuotes[t],this.equipFormData=this.equipmentInfo.equipment,this.equipmentInfoModal=!0},updateQuoteStatus:function(t,e){var a=this;this.selectedQuoteItem.project=this.selectedQuoteItem.project.id,this.selectedQuoteItem.quote=this.selectedQuoteItem.quote.id,this.selectedQuoteItem.vendor=this.selectedQuoteItem.vendor.id,this.selectedQuoteItem.equipment=this.selectedQuoteItem.equipment.id,this.selectedQuoteItem.quote_status=e,console.log(this.selectedQuoteItem),this.api.viewQuoteItem(this.selectedQuoteItem.slug,"put",null,this.selectedQuoteItem).then(function(t){a.$notify({group:"success",type:"success",text:"Quote status updated successfully"}),a.fetchQuoteItems()}).catch(function(t){var e=t.response.data;e.non_field_errors&&a.$notify({group:"error",type:"warn",text:e.non_field_errors[0]})})},submitQuote:function(){var t=this;this.selectedQuoteItem.project=this.selectedQuoteItem.project.id,this.selectedQuoteItem.quote=this.selectedQuoteItem.quote.id,this.selectedQuoteItem.vendor=this.selectedQuoteItem.vendor.id,this.selectedQuoteItem.equipment=this.selectedQuoteItem.equipment.id,this.api.viewQuoteItem(this.selectedQuoteItem.slug,"put",null,this.selectedQuoteItem).then(function(e){t.$notify({group:"success",type:"success",text:"Quote submitted successfully"}),t.fetchVendorQuoteItems()}).catch(function(e){var a=e.response.data;a.non_field_errors&&t.$notify({group:"error",type:"warn",text:a.non_field_errors[0]}),t.fetchVendorQuoteItems()})}},created:function(){this.fetchProject()}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page-header page-header-inner"},[t._m(0),t._v(" "),a("div",{staticClass:"page-header-right"},[a("div",{staticClass:"buttons"},[this.checkPermissions.validatePermission(this.allPermissions.change_project,this.$store.getters.getPermissions)?a("div",{staticClass:"button-group"},[a("button",{staticClass:"btn-blue",on:{click:function(e){t.projectQuotationModal=!0}}},[t._v("Request for quotation")]),t._v(" "),a("Modal",{attrs:{"ok-text":"Send request",width:"400",title:"Request for vendor quotation"},on:{"on-ok":t.requestQuotation},model:{value:t.projectQuotationModal,callback:function(e){t.projectQuotationModal=e},expression:"projectQuotationModal"}},[a("p",[t._v("When you request for quotation, each vendor whose bid on this project was accepted will be able to submit their quotes.")])])],1):t._e(),t._v(" "),a("div",{staticClass:"button-group"},[a("button",{staticClass:"btn-gray",on:{click:function(e){return e.preventDefault(),t.fetchProject(e)}}},[t._v("Refresh")])])])])]),t._v(" "),a("div",{staticClass:"page-info"},[this.checkPermissions.validatePermission(this.allPermissions.add_projectquote,this.$store.getters.getPermissions)?a("span",[t._v("\n      Request and manage project quotes. Click on the dropdown below to browse through all equipments and their respective quotes.\n    ")]):t._e(),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.add_projectquoteitem,this.$store.getters.getPermissions)&&this.projectData.bidding?a("span",[t._v("\n      This project is open for bidding and vendors are able to submit their quoteitems.\n    ")]):t._e()]),t._v(" "),a("div",{staticClass:"content-data"},[this.checkPermissions.validatePermission(this.allPermissions.add_projectquote,this.$store.getters.getPermissions)?a("div",{staticClass:"items-search"},[a("div",{staticClass:"w30"},[a("Select",{attrs:{label:"Select specific equipment"},on:{"on-change":function(e){return t.fetchQuoteItems()}},model:{value:t.selectedEquipment,callback:function(e){t.selectedEquipment=e},expression:"selectedEquipment"}},t._l(t.equipments,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1)]):t._e(),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.add_projectquoteitem,this.$store.getters.getPermissions)?a("div",{staticClass:"content-row"},[a("div",{staticClass:"content-are-one"},[t.quotesPageData.totalRecords>0?a("div",[a("legend",[t._v("Check quote status")]),t._v(" "),a("Alert",{attrs:{"show-icon":""}},[t._v("\n            Project is open for you to submit your quotes. You can quote on the table below.\n          ")]),t._v(" "),a("Table",{attrs:{columns:t.quoteColumns,data:t.vendorQuotes,loading:t.pageData.loading}}),t._v(" "),a("Modal",{attrs:{"ok-text":"Submit",width:"400",title:"Submit a quote"},on:{"on-ok":t.submitQuote},model:{value:t.newQuoteModal,callback:function(e){t.newQuoteModal=e},expression:"newQuoteModal"}},[a("form",[a("div",[a("label",{attrs:{for:"quote_price"}},[t._v("Quoted price")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedQuoteItem.quote_price,expression:"selectedQuoteItem.quote_price"}],staticClass:"input",class:t.formErrors.quote_price?"invalid-input":"",attrs:{type:"number",value:"",name:"quote_price",placeholder:"",id:"quote_price"},domProps:{value:t.selectedQuoteItem.quote_price},on:{input:function(e){e.target.composing||t.$set(t.selectedQuoteItem,"quote_price",e.target.value)}}}),t._v(" "),t.formErrors.quote_price?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.quote_price[0]))]):t._e()])])]),t._v(" "),a("Modal",{attrs:{"ok-text":"Close",width:"400",title:"Equipment details"},model:{value:t.equipmentInfoModal,callback:function(e){t.equipmentInfoModal=e},expression:"equipmentInfoModal"}},[a("div",[a("div",[a("label",{attrs:{for:"name"}},[t._v("Equipment's name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.name,expression:"equipFormData.name"}],staticClass:"input",class:t.formErrors.name?"invalid-input":"",attrs:{required:t.equipFormData.name,type:"text",value:"",name:"name",placeholder:"",id:"name"},domProps:{value:t.equipFormData.name},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"name",e.target.value)}}}),t._v(" "),t.formErrors.name?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.name[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w50 float-left"},[a("label",{attrs:{for:"estimated_quantity"}},[t._v("Estimated quantity")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.estimated_quantity,expression:"equipFormData.estimated_quantity"}],staticClass:"input",class:t.formErrors.estimated_quantity?"invalid-input":"",attrs:{required:t.equipFormData.estimated_quantity,type:"number",value:"",name:"estimated_quantity",placeholder:"",id:"estimated_quantity"},domProps:{value:t.equipFormData.estimated_quantity},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"estimated_quantity",e.target.value)}}}),t._v(" "),t.formErrors.estimated_quantity?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.estimated_quantity[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w50 float-right"},[a("label",{attrs:{for:"unit_cost_in"}},[t._v("Unit cost currency")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.unit_cost_in,expression:"equipFormData.unit_cost_in"}],staticClass:"input",class:t.formErrors.unit_cost_in?"invalid-input":"",attrs:{required:t.equipFormData.unit_cost_in,type:"text",value:"",name:"unit_cost_in",placeholder:"",id:"unit_cost_in"},domProps:{value:t.equipFormData.unit_cost_in},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"unit_cost_in",e.target.value)}}}),t._v(" "),t.formErrors.unit_cost_in?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.unit_cost_in[0]))]):t._e()])]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w30 float-left"},[a("label",{attrs:{for:"length"}},[t._v("Length")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.length,expression:"equipFormData.length"}],staticClass:"input",class:t.formErrors.length?"invalid-input":"",attrs:{required:t.equipFormData.length,type:"number",value:"",name:"length",placeholder:"",id:"length"},domProps:{value:t.equipFormData.length},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"length",e.target.value)}}}),t._v(" "),t.formErrors.length?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.length[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w30"},[a("label",{attrs:{for:"width"}},[t._v("Width")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.width,expression:"equipFormData.width"}],staticClass:"input",class:t.formErrors.width?"invalid-input":"",attrs:{required:t.equipFormData.width,type:"number",value:"",name:"width",placeholder:"",id:"width"},domProps:{value:t.equipFormData.width},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"width",e.target.value)}}}),t._v(" "),t.formErrors.width?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.width[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w30 float-right"},[a("label",{attrs:{for:"height"}},[t._v("Height")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.height,expression:"equipFormData.height"}],staticClass:"input",class:t.formErrors.height?"invalid-input":"",attrs:{required:t.equipFormData.height,type:"number",value:"",name:"height",placeholder:"",id:"height"},domProps:{value:t.equipFormData.height},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"height",e.target.value)}}}),t._v(" "),t.formErrors.height?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.height[0]))]):t._e()])]),t._v(" "),a("div",[a("label",{attrs:{for:"measurement_in"}},[t._v("Unit of measurement")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.measurement_in,expression:"equipFormData.measurement_in"}],staticClass:"input",class:t.formErrors.measurement_in?"invalid-input":"",attrs:{required:t.equipFormData.measurement_in,type:"text",value:"",name:"measurement_in",placeholder:"",id:"measurement_in"},domProps:{value:t.equipFormData.measurement_in},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"measurement_in",e.target.value)}}}),t._v(" "),t.formErrors.width?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.width[0]))]):t._e()]),t._v(" "),a("div",[a("label",{attrs:{for:"description"}},[t._v("Description")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.description,expression:"equipFormData.description"}],staticClass:"input",class:t.formErrors.description?"invalid-input":"",attrs:{required:t.equipFormData.description,name:"description",placeholder:"",id:"description"},domProps:{value:t.equipFormData.description},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"description",e.target.value)}}}),t._v(" "),t.formErrors.description?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.description[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"display-flex m--5"},[a("div",{staticClass:"w50 float-left"},[a("label",{attrs:{for:"weight"}},[t._v("Weight")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.weight,expression:"equipFormData.weight"}],staticClass:"input",class:t.formErrors.weight?"invalid-input":"",attrs:{required:t.equipFormData.weight,type:"number",value:"",name:"weight",placeholder:"",id:"weight"},domProps:{value:t.equipFormData.weight},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"weight",e.target.value)}}}),t._v(" "),t.formErrors.weight?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.weight[0]))]):t._e()]),t._v(" "),a("div",{staticClass:"w50 float-right"},[a("label",{attrs:{for:"weight_in"}},[t._v("Weight in")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.equipFormData.weight_in,expression:"equipFormData.weight_in"}],staticClass:"input",class:t.formErrors.weight_in?"invalid-input":"",attrs:{required:t.equipFormData.weight_in,type:"text",value:"",name:"measurement_in",placeholder:"",id:"weight_in"},domProps:{value:t.equipFormData.weight_in},on:{input:function(e){e.target.composing||t.$set(t.equipFormData,"weight_in",e.target.value)}}}),t._v(" "),t.formErrors.weight_in?a("span",{staticClass:"input-help-error"},[t._v(t._s(t.formErrors.weight_in[0]))]):t._e()])])])])],1):t._e()]),t._v(" "),t.bidExists||!t.bidExists&&this.projectData.bidding?a("div",{staticClass:"content-area-two"},[t._m(1)]):t._e()]):t._e(),t._v(" "),this.checkPermissions.validatePermission(this.allPermissions.change_projectquote,this.$store.getters.getPermissions)?a("div",[a("Table",{attrs:{columns:t.columns,data:t.quoteitems,loading:t.pageData.loading}}),t._v(" "),!t.pageData.loading&&t.pageData.totalPages>1?a("Page",{attrs:{total:t.pageData.totalRecords,current:t.pageData.currentPage},on:{"on-change":t.paginateAction}}):t._e(),t._v(" "),a("Modal",{attrs:{"ok-text":"Accept quote",width:"400",title:"Accept vendor quote"},on:{"on-ok":function(e){return t.updateQuoteStatus(t.selectedQuoteItem,"Accepted")}},model:{value:t.acceptQuoteModal,callback:function(e){t.acceptQuoteModal=e},expression:"acceptQuoteModal"}},[a("p",[t._v("Are you sure you accept this vendor's quote?")])]),t._v(" "),a("Modal",{staticClass:"delete-group",attrs:{"ok-text":"Deny bid",width:"400",title:"Deny vendor bid"},on:{"on-ok":function(e){return t.updateQuoteStatus(t.selectedBid.slug,"Denied")}},model:{value:t.denyBidModal,callback:function(e){t.denyBidModal=e},expression:"denyBidModal"}},[a("p",[t._v("When you deny this bid, this vendor will not be able to bid on this project again or send a quote once a request for quotation is made.")])])],1):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-header-left"},[e("h1",[e("div",{staticClass:"text"},[this._v("Quotation")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-info"},[a("div",{staticClass:"content-info-card"},[a("h4",[t._v("What you need to know")]),t._v(" "),a("ul",[a("li",[t._v("You can submit quote per equipment")]),t._v(" "),a("li",[t._v("Click on "),a("strong",[t._v("Equipment name")]),t._v(" to view more details about a given equipment.")]),t._v(" "),a("li",[t._v("Once a quote on a given equipment is accepted, the status will be updated on the list table.")])])])])}]};var ut=a("VU/8")(ot,nt,!1,function(t){a("80du")},"data-v-1528e74c",null).exports;r.default.use(g.a);var lt=new g.a({routes:[{path:"*",name:"not_found",component:E,meta:{title:"404 Error",requiresAuth:!1}},{path:"/",name:"reg_home",component:f,meta:{title:"Home",requiresAuth:!0}},{path:"/home",name:"home",component:f,meta:{title:"Home",requiresAuth:!0}},{path:"/login",name:"accounts_login",component:j,meta:{title:"Log in",requiresAuth:!1}},{path:"/logout",name:"accounts_logout",component:F,meta:{title:"Log out",requiresAuth:!1}},{path:"/users",name:"users",component:R,meta:{title:"Users",requiresAuth:!0},redirect:"/users/directory",children:[{path:"directory",name:"users_directory",component:B,meta:{title:"Users",requiresAuth:!0}},{path:"groups",name:"groups_directory",component:A,meta:{title:"Groups",requiresAuth:!0}},{path:"groups/:slug",name:"group_view",component:O,meta:{title:"Group Details",requiresAuth:!0}}]},{path:"/engineering",name:"engineering",component:S,meta:{title:"Engineering",requiresAuth:!0},children:[{path:"projects",name:"projects_directory",component:V,meta:{title:"Projects",requiresAuth:!0}},{path:"projects/:slug",name:"project_details",component:J,meta:{title:"Project",requiresAuth:!0},redirect:"/engineering/projects/:slug/overview",children:[{path:"overview",name:"project_overview",component:H,meta:{title:"Project Overview",requiresAuth:!0}},{path:"files",name:"project_files",component:Z,meta:{title:"Project Files",requiresAuth:!0}},{path:"budget",name:"project_budget",component:at,meta:{title:"Project Budget",requiresAuth:!0}},{path:"bidding",name:"project_bidding",component:rt,meta:{title:"Project Bidding",requiresAuth:!0}},{path:"quotation",name:"project_quotation",component:ut,meta:{title:"Project Quotation",requiresAuth:!0}},{path:"fabrication",name:"project_fabrication",component:J,meta:{title:"Project",requiresAuth:!0}}]}]}]}),ct=a("Dd8w"),dt=a.n(ct),pt=a("424j");r.default.use(o.a);var mt=new o.a.Store(dt()({state:{loggedIn:!1,jwt:"",userId:"",permissions:[],count:10},mutations:{setLoggedIn:function(t){t.loggedIn=!0},setUserId:function(t,e){t.userId=e},setLoggedOut:function(t){t.loggedIn=!1},setJwt:function(t,e){t.jwt=e},setPermissions:function(t,e){t.permissions=e},increment:function(t){t.count++}},getters:{getLoggedIn:function(t){return t.loggedIn},getJwt:function(t){return t.jwt},getUserId:function(t){return t.userId},getPermissions:function(t){return t.permissions}}},o.a.mapState,o.a.mapMutations,o.a.mapGetters(["getLoggedIn"]),{plugins:[Object(pt.a)()]})),vt={validatePermission:function(t,e){for(var a=!1,i=0;i<e.length;i++){if(e[i]===t){a=!0;break}a=!1}return a}},_t={view_user:"auth.view_user",add_user:"auth.add_user",change_user:"auth.change_user",delete_user:"auth.delete_user",view_group:"auth.view_group",add_group:"auth.add_group",change_group:"auth.change_group",delete_group:"auth.delete_group",view_project:"engineering.view_project",add_project:"engineering.add_project",change_project:"engineering.change_project",delete_project:"engineering.delete_project",view_projectfile:"engineering.view_projectfile",add_projectfile:"engineering.add_projectfile",change_projectfile:"engineering.change_projectfile",delete_projectfile:"engineering.delete_projectfile",view_projectequipment:"engineering.view_projectequipment",add_projectequipment:"engineering.add_projectequipment",change_projectequipment:"engineering.change_projectequipment",delete_projectequipment:"engineering.delete_projectequipment",view_projectbudget:"engineering.view_projectbudget",add_projectbudget:"engineering.add_projectbudget",change_projectbudget:"engineering.change_projectbudget",delete_projectbudget:"engineering.delete_projectbudget",view_projectbid:"engineering.view_projectbid",add_projectbid:"engineering.add_projectbid",change_projectbid:"engineering.change_projectbid",delete_projectbid:"engineering.delete_projectbid",view_projectquote:"engineering.view_projectquote",add_projectquote:"engineering.add_projectquote",change_projectquote:"engineering.change_projectquote",delete_projectquote:"engineering.delete_projectquote",view_projectquoteitem:"engineering.view_projectquoteitem",add_projectquoteitem:"engineering.add_projectquoteitem",change_projectquoteitem:"engineering.change_projectquoteitem",delete_projectquoteitem:"engineering.delete_projectquoteitem",view_region:"outlets.view_region",add_region:"outlets.add_region",change_region:"outlets.change_region",delete_region:"outlets.delete_region",view_plan:"plans.view_plan",view_all_plans:"plans.view_all_plans",view_personal_plans:"plans.view_personal_plans",add_plan:"plans.add_plan",change_plan:"plans.change_plan",delete_plan:"plans.delete_plan",view_products_category:"products.view_category",add_products_category:"products.add_category",change_products_category:"products.change_category",delete_products_category:"products.delete_category",view_products_variant:"products.view_variant",add_products_variant:"products.add_variant",change_products_variant:"products.change_variant",delete_products_variant:"products.delete_variant",view_products_brand:"products.view_brand",add_products_brand:"products.add_brand",change_products_brand:"products.change_brand",delete_products_brand:"products.delete_brand",view_products_item:"products.view_item",add_products_item:"products.add_item",change_products_item:"products.change_item",delete_products_item:"products.delete_item",view_order:"sales.view_order",add_order:"sales.add_order",change_order:"sales.change_order",delete_order:"sales.delete_order",view_virtual_order:"sales.view_virtual_order",add_virtual_order:"sales.add_virtual_order",change_virtual_order:"sales.change_virtual_order",delete_virtual_order:"sales.delete_virtual_order",view_order_item:"sales.view_order_item",add_order_item:"sales.add_order_item",change_order_item:"sales.change_order_item",delete_order_item:"sales.delete_order_item",view_reports:"reports.view_report"};r.default.config.productionTip=!1,r.default.use(o.a);r.default.use(c.a,{persist:!1}),r.default.use(p.a),r.default.use(v.a,{locale:_.a}),r.default.mixin({data:function(){return{constants:b,api:C,checkPermissions:vt,allPermissions:_t}}}),r.default.filter("sliceCapFirst",function(t){return t?(t=t.toString()).charAt(0).toUpperCase():""}),new r.default({el:"#app",store:mt,router:lt,beforeCreate:function(){var t=this.$store.getters.getJwt;if(t){var e={headers:{Authorization:"Token "+t}};r.default.prototype.$http=s.a,s.a.defaults.xsrfHeaderName="X-CSRFToken",s.a.defaults.xsrfCookieName="csrftoken",s.a.defaults.headers=e.headers}},components:{App:u},template:"<App/>"})},VgYV:function(t,e){},"XWb+":function(t,e){},gWv2:function(t,e){},mE6k:function(t,e){},oXVK:function(t,e){},pXP2:function(t,e){},rebI:function(t,e){},sdFY:function(t,e){},t8LG:function(t,e){},uUN7:function(t,e){},yUOA:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5b24f8dbf2b84084ce93.js.map